(this.webpackJsonpvanessa=this.webpackJsonpvanessa||[]).push([[13],{126:function(e,t,a){e.exports={Category:"addBook_Category__dlvdX",categoriesContainer:"addBook_categoriesContainer__2Gkjs",frameContainer:"addBook_frameContainer__oVIwQ",fileAdd:"addBook_fileAdd__a2Xcg",inptsContainer:"addBook_inptsContainer__2wgYG",fileSbmt:"addBook_fileSbmt__1c8NE",buttonContainer:"addBook_buttonContainer__2ol1t",writingContainer:"addBook_writingContainer__2eQ8r",newChapContainer:"addBook_newChapContainer__2ShKR",delAkapit:"addBook_delAkapit__2jk60",oneUp:"addBook_oneUp__xAl5_",oneDown:"addBook_oneDown__M38nc",BackgroundForBook:"addBook_BackgroundForBook__13gGK"}},147:function(e,t,a){"use strict";a.r(t);var n=a(30),o=a(31),i=a(33),r=a(32),c=a(0),s=a.n(c),l=a(16),d=a(17),m=a(126),u=a.n(m),p=a(11),g=a.n(p),h=a(26),_=a(24),f=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={preview:null,id:"",sent:!1,error:"",btnCt:"",redirect:!1,book:{},file:null,imagePreviewUrl:""},e.addImg=function(t){t.preventDefault();var a="".concat(l.a,"/books/mine/").concat(e.state.id,"/addCover"),n={"Content-Type":"multipart/form-data",Authorization:"Bearer "+Object(d.a)().token};console.log(n);var o=new FormData;o.append("image",e.state.file,e.state.file.name),h.a.post(a,o,{headers:n}).then((function(t){e.setState({sent:!0,error:""})})).catch((function(t){console.log(t),e.setState({sent:!1,error:"Co\u015b posz\u0142o nie tak. Zdj\u0119cie musi by\u0107 w formacie png lub jpg i mie\u0107 nie wi\u0119cej ni\u017c 1 Mb."})}))},e.goFurther=function(){!0===e.state.sent?e.setState({redirect:!0}):e.setState({error:"Zdj\u0119cie musi by\u0107 dodane"})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({id:t});var a="".concat(l.a,"/books/").concat(t),n={"Content-Type":"application/json",Authorization:"Bearer "+Object(d.a)().token};h.a.get(a,{headers:n}).then((function(t){console.log(t.data),e.setState({book:t.data})})).catch((function(e){console.log(e)}))}},{key:"handleImageChange",value:function(e){var t=this;e.preventDefault();var a=new FileReader,n=e.target.files[0];a.onloadend=function(){t.setState({file:n,imagePreviewUrl:a.result})},a.readAsDataURL(n)}},{key:"render",value:function(){var e=this;return console.log(this.state.file),!0===this.state.redirect?s.a.createElement(_.a,{to:"/myBooks/".concat(this.state.id,"/writing")}):s.a.createElement("div",null,s.a.createElement("div",{style:{color:"red",width:"100%",height:"50px"}},this.state.error),s.a.createElement("form",{onSubmit:function(t){return e.addImg(t)}},s.a.createElement("div",{className:u.a.inptsContainer},s.a.createElement("input",{className:"".concat(u.a.fileAdd," ").concat(u.a.inpt),name:"image",accept:"image/png, image/jpeg, image/jpg",type:"file",onChange:function(t){return e.handleImageChange(t)}}),s.a.createElement("input",{className:"".concat(u.a.inpt," ").concat(u.a.fileSbmt),type:"submit",value:"Prze\u015blij"}))),s.a.createElement("div",{className:u.a.buttonContainer},s.a.createElement("button",{onClick:this.goFurther,className:g.a.typicalBtn},"Chc\u0119 przej\u015b\u0107 do pisania!")),s.a.createElement("div",{className:u.a.frameContainer},s.a.createElement("img",{alt:"bookCover",src:""!==this.state.imagePreviewUrl?this.state.imagePreviewUrl:"".concat(l.a,"/").concat(this.state.book.coverUrl)})))}}]),a}(c.Component);t.default=f}}]);
//# sourceMappingURL=13.6ff124ca.chunk.js.map