(this.webpackJsonpvanessa=this.webpackJsonpvanessa||[]).push([[6],{103:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(104),o=Object.prototype.hasOwnProperty,r=Array.prototype.splice,i=Object.prototype.toString;function c(e){return i.call(e).slice(8,-1)}var s=Object.assign||function(e,t){return u(t).forEach((function(a){o.call(t,a)&&(e[a]=t[a])})),e},u="function"===typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function l(e){return Array.isArray(e)?s(e.constructor(e.length),e):"Map"===c(e)?new Map(e):"Set"===c(e)?new Set(e):e&&"object"===typeof e?s(Object.create(Object.getPrototypeOf(e)),e):e}var p=function(){function e(){this.commands=s({},d),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var a=this,r="function"===typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(r)||n(!Array.isArray(r),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),n("object"===typeof r&&null!==r,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var i=e;return u(r).forEach((function(t){if(o.call(a.commands,t)){var n=e===i;i=a.commands[t](r[t],i,r,e),n&&a.isEquals(i,e)&&(i=e)}else{var s="Map"===c(e)?a.update(e.get(t),r[t]):a.update(e[t],r[t]),u="Map"===c(i)?i.get(t):i[t];a.isEquals(s,u)&&("undefined"!==typeof s||o.call(e,t))||(i===e&&(i=l(e)),"Map"===c(i)?i.set(t,s):i[t]=s)}})),i},e}();t.Context=p;var d={$push:function(e,t,a){return h(t,a,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,a){return h(t,a,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,a,o){return function(e,t){n(Array.isArray(e),"Expected $splice target to be an array; got %s",e),y(t.$splice)}(t,a),e.forEach((function(e){y(e),t===o&&e.length&&(t=l(o)),r.apply(t,e)})),t},$set:function(e,t,a){return function(e){n(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(a),e},$toggle:function(e,t){m(e,"$toggle");var a=e.length?l(t):t;return e.forEach((function(e){a[e]=!t[e]})),a},$unset:function(e,t,a,n){return m(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=l(n)),delete t[e])})),t},$add:function(e,t,a,n){return g(t,"$add"),m(e,"$add"),"Map"===c(t)?e.forEach((function(e){var a=e[0],o=e[1];t===n&&t.get(a)!==o&&(t=l(n)),t.set(a,o)})):e.forEach((function(e){t!==n||t.has(e)||(t=l(n)),t.add(e)})),t},$remove:function(e,t,a,n){return g(t,"$remove"),m(e,"$remove"),e.forEach((function(e){t===n&&t.has(e)&&(t=l(n)),t.delete(e)})),t},$merge:function(e,t,a,o){var r,i;return r=t,n((i=e)&&"object"===typeof i,"update(): $merge expects a spec of type 'object'; got %s",i),n(r&&"object"===typeof r,"update(): $merge expects a target of type 'object'; got %s",r),u(e).forEach((function(a){e[a]!==t[a]&&(t===o&&(t=l(o)),t[a]=e[a])})),t},$apply:function(e,t){var a;return n("function"===typeof(a=e),"update(): expected spec of $apply to be a function; got %s.",a),e(t)}},f=new p;function h(e,t,a){n(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",a,e),m(t[a],a)}function m(e,t){n(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function y(e){n(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function g(e,t){var a=c(e);n("Map"===a||"Set"===a,"update(): %s expects a target of type Set or Map; got %s",t,a)}t.isEquals=f.update.isEquals,t.extend=f.extend,t.default=f.update,t.default.default=e.exports=s(t.default,t)},104:function(e,t,a){"use strict";e.exports=function(e,t,a,n,o,r,i,c){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[a,n,o,r,i,c],l=0;(s=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},115:function(e,t,a){"use strict";a.r(t);var n=a(99),o=a(21),r=a(22),i=a(24),c=a(23),s=a(25),u=a(0),l=a.n(u),p=a(16),d=a(10),f=a(1),h=a.n(f),m=a(97),y=a.n(m),g=a(2),b=a(42),v=a.n(b),k=a(103),E=a.n(k),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={book:[{title:"",chapters:[],url:{data:[]},categories:[]}],id:"",img:"",changeGenre:!1,genre:"",loaded:!1,deleted:!1},a.changeGenre=function(e){a.setState({genre:e.target.value},(function(){var e={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(d.a)().token)},t=a.props.match.params.id;a.setState({id:t},(function(){fetch("".concat(p.a,"books/mine/patchGenre/").concat(a.state.id),{method:"PATCH",headers:e,body:JSON.stringify({genre:a.state.genre})}).then((function(e){return e.ok,e.json()})).then((function(e){}))}))}))},a.deleteBook=function(e){var t={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(d.a)().token)};fetch("".concat(p.a,"books/mine/deleteBook/").concat(e),{method:"DELETE",headers:t,body:JSON.stringify({id:e})}).then((function(e){return e})).then((function(e){return a.props.history.push("/")}))},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"arrayBufferToBase64",value:function(e){for(var t="",a=new Uint8Array(e),n=a.byteLength,o=0;o<n;o++)t+=String.fromCharCode(a[o]);return window.btoa(t)}},{key:"componentDidMount",value:function(){var e=this,t={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(d.a)().token)},a=this.props.match.params.id;this.setState({id:a},(function(){fetch("".concat(p.a,"books/mine/").concat(e.state.id),{headers:t}).then((function(e){return e.json()})).then((function(t){e.setState({book:t},(function(){e.setState({loaded:!0})}))}))}))}},{key:"chagnerGenreHandler",value:function(){this.setState({changeGenre:!this.state.changeGenre})}},{key:"componentDidUpdate",value:function(e,t){t.book[0].genre!=this.state.genre&&""!==this.state.genre&&this.setState({book:E()(this.state.book,Object(n.a)({},0,{genre:{$set:this.state.genre}}))})}},{key:"render",value:function(){var e=this,t="";return t=void 0!=this.state.book[0].url?this.arrayBufferToBase64(this.state.book[0].url.data):"",l.a.createElement("div",{className:y.a.BackgroundForBook},l.a.createElement("h2",null,this.state.book[0].title),void 0!=this.state.book[0].url?l.a.createElement("div",{className:y.a.writingContainer},l.a.createElement("img",{src:"data:image/jpeg;base64,"+t})):l.a.createElement("div",{className:y.a.writingContainer},l.a.createElement("img",{src:v.a})),l.a.createElement("div",{className:y.a.writingContainer},l.a.createElement("p",null,this.state.book[0].genre)," ",l.a.createElement("button",{onClick:this.chagnerGenreHandler.bind(this)},"Edytuj")," ",this.state.changeGenre?l.a.createElement("div",null,l.a.createElement("select",{value:this.state.genre,onChange:function(t){return e.changeGenre(t)}},l.a.createElement("option",{value:""}),l.a.createElement("option",{value:"krymina\u0142"},"Krymina\u0142"),l.a.createElement("option",{value:"powie\u015b\u0107 psychologiczna"},"Powie\u015b\u0107 psychologiczna"),l.a.createElement("option",{value:"powie\u015b\u0107 romantyczna"},"Powie\u015b\u0107 romantyczna"),l.a.createElement("option",{value:"powie\u015b\u0107 obyczajowa"},"Powie\u015b\u0107 obyczajowa"),l.a.createElement("option",{value:"eseje"},"Eseje"),l.a.createElement("option",{value:"thriller"},"Thriller"),l.a.createElement("option",{value:"powie\u015b\u0107 humorystyczna"},"Powie\u015b\u0107 humorystycza"),l.a.createElement("option",{value:"horror"},"Horror"),l.a.createElement("option",{value:"si-fi"},"Si-Fi"),l.a.createElement("option",{value:"fantastyka"},"Fantastyka"),l.a.createElement("option",{value:"literatura faktu"},"Literatura faktu"),l.a.createElement("option",{value:"dla dzieci i m\u0142odzie\u017cy"},"Dla dzieci i m\u0142odzie\u017cy"))," "):null," "),l.a.createElement("div",{className:y.a.writingContainer},this.state.book[0].categories.map((function(e){return l.a.createElement("span",null,"cat")}))),l.a.createElement("div",{className:y.a.writingContainer},this.state.book[0].description),l.a.createElement("div",{className:y.a.writingContainer},this.state.book[0].sample),l.a.createElement("div",{className:y.a.writingContainer},this.state.book[0].year),l.a.createElement("div",null,l.a.createElement("h3",null,"Rozdzia\u0142y"),this.state.book[0].chapters.map((function(t,a){return l.a.createElement(g.b,{key:a,to:"/myBooks/".concat(e.state.id,"/chapters/").concat(a)},l.a.createElement("button",{className:h.a.typicalBtn},t.chaptitle))})),this.state.book[0].chapters.length>0?l.a.createElement(g.b,{to:"/myBooks/".concat(this.state.id,"/chapters/").concat(this.state.book[0].chapters.length)},l.a.createElement("button",null,"Nowy rozdzia\u0142")):l.a.createElement(g.b,{to:"/myBooks/".concat(this.state.id,"/chapters/0")},l.a.createElement("button",null,"Zacznij pisa\u0107"))),l.a.createElement("button",{onClick:function(){return e.deleteBook(e.state.id)}},"Usuwam ten bullshit"))}}]),t}(u.Component);t.default=w},97:function(e,t,a){e.exports={Category:"addBook_Category__dlvdX",categoriesContainer:"addBook_categoriesContainer__2Gkjs",frameContainer:"addBook_frameContainer__oVIwQ",fileAdd:"addBook_fileAdd__a2Xcg",inptsContainer:"addBook_inptsContainer__2wgYG",fileSbmt:"addBook_fileSbmt__1c8NE",buttonContainer:"addBook_buttonContainer__2ol1t",writingContainer:"addBook_writingContainer__2eQ8r",newChapContainer:"addBook_newChapContainer__2ShKR",delAkapit:"addBook_delAkapit__2jk60",oneUp:"addBook_oneUp__xAl5_",oneDown:"addBook_oneDown__M38nc",BackgroundForBook:"addBook_BackgroundForBook__13gGK"}},99:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=6.5332b9a4.chunk.js.map