(this.webpackJsonpvanessa=this.webpackJsonpvanessa||[]).push([[6],{126:function(e,t,n){e.exports={Category:"addBook_Category__dlvdX",categoriesContainer:"addBook_categoriesContainer__2Gkjs",frameContainer:"addBook_frameContainer__oVIwQ",fileAdd:"addBook_fileAdd__a2Xcg",inptsContainer:"addBook_inptsContainer__2wgYG",fileSbmt:"addBook_fileSbmt__1c8NE",buttonContainer:"addBook_buttonContainer__2ol1t",writingContainer:"addBook_writingContainer__2eQ8r",newChapContainer:"addBook_newChapContainer__2ShKR",delAkapit:"addBook_delAkapit__2jk60",oneUp:"addBook_oneUp__xAl5_",oneDown:"addBook_oneDown__M38nc",BackgroundForBook:"addBook_BackgroundForBook__13gGK"}},130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(131),o=Object.prototype.hasOwnProperty,r=Array.prototype.splice,i=Object.prototype.toString;function c(e){return i.call(e).slice(8,-1)}var s=Object.assign||function(e,t){return u(t).forEach((function(n){o.call(t,n)&&(e[n]=t[n])})),e},u="function"===typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function l(e){return Array.isArray(e)?s(e.constructor(e.length),e):"Map"===c(e)?new Map(e):"Set"===c(e)?new Set(e):e&&"object"===typeof e?s(Object.create(Object.getPrototypeOf(e)),e):e}var p=function(){function e(){this.commands=s({},d),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var n=this,r="function"===typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(r)||a(!Array.isArray(r),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),a("object"===typeof r&&null!==r,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var i=e;return u(r).forEach((function(t){if(o.call(n.commands,t)){var a=e===i;i=n.commands[t](r[t],i,r,e),a&&n.isEquals(i,e)&&(i=e)}else{var s="Map"===c(e)?n.update(e.get(t),r[t]):n.update(e[t],r[t]),u="Map"===c(i)?i.get(t):i[t];n.isEquals(s,u)&&("undefined"!==typeof s||o.call(e,t))||(i===e&&(i=l(e)),"Map"===c(i)?i.set(t,s):i[t]=s)}})),i},e}();t.Context=p;var d={$push:function(e,t,n){return f(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return f(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,o){return function(e,t){a(Array.isArray(e),"Expected $splice target to be an array; got %s",e),y(t.$splice)}(t,n),e.forEach((function(e){y(e),t===o&&e.length&&(t=l(o)),r.apply(t,e)})),t},$set:function(e,t,n){return function(e){a(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(n),e},$toggle:function(e,t){m(e,"$toggle");var n=e.length?l(t):t;return e.forEach((function(e){n[e]=!t[e]})),n},$unset:function(e,t,n,a){return m(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===a&&(t=l(a)),delete t[e])})),t},$add:function(e,t,n,a){return g(t,"$add"),m(e,"$add"),"Map"===c(t)?e.forEach((function(e){var n=e[0],o=e[1];t===a&&t.get(n)!==o&&(t=l(a)),t.set(n,o)})):e.forEach((function(e){t!==a||t.has(e)||(t=l(a)),t.add(e)})),t},$remove:function(e,t,n,a){return g(t,"$remove"),m(e,"$remove"),e.forEach((function(e){t===a&&t.has(e)&&(t=l(a)),t.delete(e)})),t},$merge:function(e,t,n,o){var r,i;return r=t,a((i=e)&&"object"===typeof i,"update(): $merge expects a spec of type 'object'; got %s",i),a(r&&"object"===typeof r,"update(): $merge expects a target of type 'object'; got %s",r),u(e).forEach((function(n){e[n]!==t[n]&&(t===o&&(t=l(o)),t[n]=e[n])})),t},$apply:function(e,t){var n;return a("function"===typeof(n=e),"update(): expected spec of $apply to be a function; got %s.",n),e(t)}},h=new p;function f(e,t,n){a(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e),m(t[n],n)}function m(e,t){a(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function y(e){a(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function g(e,t){var n=c(e);a("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",t,n)}t.isEquals=h.update.isEquals,t.extend=h.extend,t.default=h.update,t.default.default=e.exports=s(t.default,t)},131:function(e,t,n){"use strict";e.exports=function(e,t,n,a,o,r,i,c){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,o,r,i,c],l=0;(s=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},147:function(e,t,n){"use strict";n.r(t);var a=n(30),o=n(31),r=n(33),i=n(32),c=n(0),s=n.n(c),u=n(16),l=n(17),p=n(11),d=n.n(p),h=n(126),f=n.n(h),m=n(9),y=n(130),g=n.n(y),b=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={book:{},id:"",img:"",changeGenre:!1,genre:"",loaded:!1,deleted:!1},e.changeGenre=function(t){e.setState({genre:t.target.value},(function(){var t={"Content-Type":"application/json",Authorization:"Bearer "+Object(l.a)().token},n=e.props.match.params.id;e.setState({id:n},(function(){fetch("".concat(u.a,"books/mine/patchGenre/").concat(e.state.id),{method:"PATCH",headers:t,body:JSON.stringify({genre:e.state.genre})}).then((function(e){return e.ok,e.json()})).then((function(e){}))}))}))},e.deleteBook=function(t){var n={"Content-Type":"application/json",Authorization:"Bearer "+Object(l.a)().token};fetch("".concat(u.a,"books/mine/deleteBook/").concat(t),{method:"DELETE",headers:n,body:JSON.stringify({id:t})}).then((function(e){return e})).then((function(t){return e.props.history.push("/")}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t={"Content-Type":"application/json",Authorization:"Bearer "+Object(l.a)().token},n=this.props.match.params.id;this.setState({id:n},(function(){fetch("".concat(u.a,"/books/mine/").concat(e.state.id),{headers:t}).then((function(e){return e.json()})).then((function(t){e.setState({book:t},(function(){e.setState({loaded:!0})}))}))}))}},{key:"chagnerGenreHandler",value:function(){this.setState({changeGenre:!this.state.changeGenre})}},{key:"componentDidUpdate",value:function(e,t){t.book.genre!==this.state.genre&&""!==this.state.genre&&this.setState({book:g()(this.state.book,{genre:{$set:this.state.genre}})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:f.a.BackgroundForBook},s.a.createElement("h2",null,this.state.book.title),s.a.createElement("div",{className:f.a.writingContainer},s.a.createElement("img",{src:"".concat(u.a,"/").concat(this.state.book.coverUrl),alt:"cover"})),s.a.createElement("div",{className:f.a.writingContainer},s.a.createElement("p",null,this.state.book.genre)," ",s.a.createElement("button",{onClick:function(){return e.chagnerGenreHandler()}},"Edytuj")," ",this.state.changeGenre?s.a.createElement("div",null,s.a.createElement("select",{value:this.state.genre,onChange:function(t){return e.changeGenre(t)}},s.a.createElement("option",{value:""}),s.a.createElement("option",{value:"krymina\u0142"},"Krymina\u0142"),s.a.createElement("option",{value:"powie\u015b\u0107 psychologiczna"},"Powie\u015b\u0107 psychologiczna"),s.a.createElement("option",{value:"powie\u015b\u0107 romantyczna"},"Powie\u015b\u0107 romantyczna"),s.a.createElement("option",{value:"powie\u015b\u0107 obyczajowa"},"Powie\u015b\u0107 obyczajowa"),s.a.createElement("option",{value:"eseje"},"Eseje"),s.a.createElement("option",{value:"thriller"},"Thriller"),s.a.createElement("option",{value:"powie\u015b\u0107 humorystyczna"},"Powie\u015b\u0107 humorystycza"),s.a.createElement("option",{value:"horror"},"Horror"),s.a.createElement("option",{value:"si-fi"},"Si-Fi"),s.a.createElement("option",{value:"fantastyka"},"Fantastyka"),s.a.createElement("option",{value:"literatura faktu"},"Literatura faktu"),s.a.createElement("option",{value:"dla dzieci i m\u0142odzie\u017cy"},"Dla dzieci i m\u0142odzie\u017cy"))," "):null," "),s.a.createElement("div",{className:f.a.writingContainer},this.state.book.categories&&this.state.book.categories.map((function(e){return s.a.createElement("span",null,"cat")}))),s.a.createElement("div",{className:f.a.writingContainer},this.state.book.description),s.a.createElement("div",{className:f.a.writingContainer},this.state.book.sample),s.a.createElement("div",{className:f.a.writingContainer},this.state.book.year),s.a.createElement("div",null,s.a.createElement("h3",null,"Rozdzia\u0142y"),this.state.book.chapters&&this.state.book.chapters.map((function(t,n){return s.a.createElement(m.b,{key:n,to:"/myBooks/".concat(e.state.id,"/chapters/").concat(n)},s.a.createElement("button",{className:d.a.typicalBtn},t.chapTitle))})),this.state.book.chapters&&this.state.book.chapters.length>0?s.a.createElement(m.b,{to:"/myBooks/".concat(this.state.id,"/chapters/").concat(this.state.book.chapters.length)},s.a.createElement("button",null,"Nowy rozdzia\u0142")):s.a.createElement(m.b,{to:"/myBooks/".concat(this.state.id,"/chapters/0")},s.a.createElement("button",null,"Zacznij pisa\u0107"))),s.a.createElement("button",{onClick:function(){return e.deleteBook(e.state.id)}},"Usuwam ten bullshit"))}}]),n}(c.Component);t.default=b}}]);
//# sourceMappingURL=6.444db519.chunk.js.map