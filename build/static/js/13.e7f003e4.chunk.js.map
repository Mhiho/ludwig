{"version":3,"sources":["styles/addBook.module.scss","components/AddBook/AddBookCover.js"],"names":["module","exports","AddBookCover","state","file","preview","id","sent","error","btnCt","redirect","addImg","event","preventDefault","url","adresse","headers","Authorization","getUser","token","axios","post","then","res","setState","catch","console","log","goFurther","this","props","match","params","to","style","color","width","height","onSubmit","e","className","classes","inptsContainer","fileAdd","inpt","name","accept","type","onChange","handleImageChange","fileSbmt","value","buttonContainer","onClick","classesRoot","typicalBtn","frameContainer","src","empty","Component"],"mappings":"wFACAA,EAAOC,QAAU,CAAC,SAAW,0BAA0B,oBAAsB,qCAAqC,eAAiB,gCAAgC,QAAU,yBAAyB,eAAiB,gCAAgC,SAAW,0BAA0B,gBAAkB,iCAAiC,iBAAmB,kCAAkC,iBAAmB,kCAAkC,UAAY,2BAA2B,MAAQ,uBAAuB,QAAU,yBAAyB,kBAAoB,qC,yLCQhjBC,E,4MACJC,MAAQ,CACNC,KAAM,OACNC,QAAS,KACTC,GAAI,GACJC,MAAM,EACNC,MAAO,GACPC,MAAO,GACPC,UAAU,G,EAQZC,OAAS,SAACC,GACRA,EAAMC,iBAEN,IAAMC,EAAG,UAAMC,IAAN,gCAAqC,EAAKZ,MAAMG,IACnDU,EAAU,CACd,eAAgB,OAChBC,cAAe,UAAYC,cAAUC,OAGvCC,IACGC,KAAKP,EAAK,CACTE,QAASA,IAEVM,MAAK,SAACC,GAEL,EAAKC,SAAS,CACZjB,MAAM,EACNC,MAAO,QAGViB,OAAM,SAACjB,GACNkB,QAAQC,IAAInB,GACZ,EAAKgB,SAAS,CACZjB,MAAM,EACNC,MACE,mI,EAQVoB,UAAY,YACc,IAApB,EAAKzB,MAAMI,KACb,EAAKiB,SAAS,CAAEd,UAAU,IAE1B,EAAKc,SAAS,CAAEhB,MAAO,uC,kEA1CN,IACbF,EAAOuB,KAAKC,MAAMC,MAAMC,OAAxB1B,GACNuB,KAAKL,SAAS,CAAElB,GAAIA,M,wCAiCJM,GAChBA,EAAMC,mB,+BAUE,IAAD,OACP,OAA4B,IAAxBgB,KAAK1B,MAAMO,SACN,kBAAC,IAAD,CAAUuB,GAAE,mBAAcJ,KAAK1B,MAAMG,GAAzB,cAGnB,6BACE,yBAAK4B,MAAO,CAAEC,MAAO,MAAOC,MAAO,OAAQC,OAAQ,SAChDR,KAAK1B,MAAMK,OAEd,0BAAM8B,SAAU,SAACC,GAAD,OAAO,EAAK5B,OAAO4B,KACjC,yBAAKC,UAAWC,IAAQC,gBACtB,2BACEF,UAAS,UAAKC,IAAQE,QAAb,YAAwBF,IAAQG,MACzCC,KAAK,iBACLC,OAAO,mCACPC,KAAK,OACLC,SAAU,SAACT,GAAD,OAAO,EAAKU,kBAAkBV,MAG1C,2BACEC,UAAS,UAAKC,IAAQG,KAAb,YAAqBH,IAAQS,UACtCH,KAAK,SACLI,MAAM,oBAIZ,yBAAKX,UAAWC,IAAQW,iBACtB,4BAAQC,QAASxB,KAAKD,UAAWY,UAAWc,IAAYC,YAAxD,4CAIF,yBAAKf,UAAWC,IAAQe,gBACrB3B,KAAK1B,MAAME,QACV,yBAAKoD,IAAK5B,KAAK1B,MAAME,UAErB,yBAAKoD,IAAKC,Y,GA5FKC,aAoGZzD","file":"static/js/13.e7f003e4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Category\":\"addBook_Category__dlvdX\",\"categoriesContainer\":\"addBook_categoriesContainer__2Gkjs\",\"frameContainer\":\"addBook_frameContainer__oVIwQ\",\"fileAdd\":\"addBook_fileAdd__a2Xcg\",\"inptsContainer\":\"addBook_inptsContainer__2wgYG\",\"fileSbmt\":\"addBook_fileSbmt__1c8NE\",\"buttonContainer\":\"addBook_buttonContainer__2ol1t\",\"writingContainer\":\"addBook_writingContainer__2eQ8r\",\"newChapContainer\":\"addBook_newChapContainer__2ShKR\",\"delAkapit\":\"addBook_delAkapit__2jk60\",\"oneUp\":\"addBook_oneUp__xAl5_\",\"oneDown\":\"addBook_oneDown__M38nc\",\"BackgroundForBook\":\"addBook_BackgroundForBook__13gGK\"};","import React, { Component } from \"react\";\nimport { adresse } from \"../../config\";\nimport { getUser } from \"../../services/auth\";\nimport classes from \"../../styles/addBook.module.scss\";\nimport classesRoot from \"../../styles/index.module.scss\";\nimport axios from \"axios\";\nimport empty from \"../../assets/images/empty.png\";\nimport { Redirect } from \"react-router-dom\";\n\nclass AddBookCover extends Component {\n  state = {\n    file: \"file\",\n    preview: null,\n    id: \"\",\n    sent: false,\n    error: \"\",\n    btnCt: \"\",\n    redirect: false,\n  };\n\n  componentDidMount() {\n    let { id } = this.props.match.params;\n    this.setState({ id: id });\n  }\n\n  addImg = (event) => {\n    event.preventDefault();\n\n    const url = `${adresse}/books/mine/addImage/${this.state.id}`;\n    const headers = {\n      \"content-type\": \"file\",\n      Authorization: \"Bearer \" + getUser().token,\n    };\n\n    axios\n      .post(url, {\n        headers: headers,\n      })\n      .then((res) => {\n        // then print response status\n        this.setState({\n          sent: true,\n          error: \"\",\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({\n          sent: false,\n          error:\n            \"Coś poszło nie tak. Zdjęcie musi być w formacie png lub jpg i mieć nie więcej niż 1 Mb.\",\n        });\n      });\n  };\n\n  handleImageChange(event) {\n    event.preventDefault();\n  }\n  goFurther = () => {\n    if (this.state.sent === true) {\n      this.setState({ redirect: true });\n    } else {\n      this.setState({ error: \"Zdjęcie musi być dodane\" });\n    }\n  };\n\n  render() {\n    if (this.state.redirect === true) {\n      return <Redirect to={`/myBooks/${this.state.id}/writing`} />;\n    }\n    return (\n      <div>\n        <div style={{ color: \"red\", width: \"100%\", height: \"50px\" }}>\n          {this.state.error}\n        </div>\n        <form onSubmit={(e) => this.addImg(e)}>\n          <div className={classes.inptsContainer}>\n            <input\n              className={`${classes.fileAdd} ${classes.inpt}`}\n              name=\"coverBookImage\"\n              accept=\"image/png, image/jpeg, image/jpg\"\n              type=\"file\"\n              onChange={(e) => this.handleImageChange(e)}\n            />\n\n            <input\n              className={`${classes.inpt} ${classes.fileSbmt}`}\n              type=\"submit\"\n              value=\"Prześlij\"\n            />\n          </div>\n        </form>\n        <div className={classes.buttonContainer}>\n          <button onClick={this.goFurther} className={classesRoot.typicalBtn}>\n            Chcę przejść do pisania!\n          </button>\n        </div>\n        <div className={classes.frameContainer}>\n          {this.state.preview ? (\n            <img src={this.state.preview} />\n          ) : (\n            <img src={empty} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AddBookCover;\n"],"sourceRoot":""}