{"version":3,"sources":["styles/addBook.module.scss","components/AddBook/AddBookCover.js"],"names":["module","exports","AddBookCover","state","file","preview","id","sent","error","btnCt","redirect","addImg","event","preventDefault","url","adresse","headers","getUser","token","data","FormData","target","append","name","axios","post","then","res","setState","catch","console","log","goFurther","this","props","match","params","reader","FileReader","files","onloadend","result","readAsDataURL","to","style","color","width","height","onSubmit","e","className","classes","inptsContainer","fileAdd","inpt","accept","type","onChange","handleImageChange","fileSbmt","value","buttonContainer","onClick","classesRoot","typicalBtn","frameContainer","src","empty","Component"],"mappings":"wFACAA,EAAOC,QAAU,CAAC,SAAW,0BAA0B,oBAAsB,qCAAqC,eAAiB,gCAAgC,QAAU,yBAAyB,eAAiB,gCAAgC,SAAW,0BAA0B,gBAAkB,iCAAiC,iBAAmB,kCAAkC,iBAAmB,kCAAkC,UAAY,2BAA2B,MAAQ,uBAAuB,QAAU,yBAAyB,kBAAoB,qC,wLCShjBC,E,4MACFC,MAAO,CACHC,KAAM,OACNC,QAAS,KACTC,GAAI,GACJC,MAAM,EACNC,MAAO,GACPC,MAAO,GACPC,UAAU,G,EAUdC,OAAS,SAACC,GACRA,EAAMC,iBAEJ,IAAMC,EAAG,UAAMC,IAAN,+BAAoC,EAAKZ,MAAMG,IAClDU,EAAU,CAAE,eAAgB,WAClC,cAAiB,oBAAeC,cAAUC,QAEtCC,EAAO,IAAIC,SAASR,EAAMS,QAE9BF,EAAKG,OAAO,cAAc,EAAKnB,MAAMC,KAAKmB,MAC1CC,IAAMC,KAAKX,EAAKK,EAAM,CACpBH,QAASA,IAEdU,MAAK,SAAAC,GACF,EAAKC,SAAS,CAACrB,MAAM,EACNC,MAAO,QACtBqB,OAAM,SAAArB,GACRsB,QAAQC,IAAIvB,GACZ,EAAKoB,SAAS,CAACrB,MAAM,EAAOC,MAAO,mI,EAmBnCwB,UAAY,YACa,IAApB,EAAK7B,MAAMI,KACd,EAAKqB,SAAS,CAAClB,UAAU,IAEvB,EAAKkB,SAAS,CAACpB,MAAO,uC,kEAhDR,IACbF,EAAM2B,KAAKC,MAAMC,MAAMC,OAAvB9B,GACL2B,KAAKL,SAAS,CAACtB,GAAIA,M,wCA2BDM,GAAQ,IAAD,OACvBA,EAAMC,iBAEN,IAAIwB,EAAS,IAAIC,WACblC,EAAOQ,EAAMS,OAAOkB,MAAM,GAE9BF,EAAOG,UAAY,WACjB,EAAKZ,SAAS,CACZxB,KAAMA,EACNC,QAASgC,EAAOI,UAIpBJ,EAAOK,cAActC,K,+BAUhB,IAAD,OACJ,OAA2B,IAAxB6B,KAAK9B,MAAMO,SACL,kBAAC,IAAD,CAAUiC,GAAE,mBAAcV,KAAK9B,MAAMG,GAAzB,cAGjB,6BACK,yBAAKsC,MAAO,CAACC,MAAO,MAAMC,MAAO,OAAQC,OAAQ,SAAUd,KAAK9B,MAAMK,OACxE,0BAAMwC,SAAU,SAACC,GAAD,OAAK,EAAKtC,OAAOsC,KAChC,yBAAKC,UAAWC,IAAQC,gBAExB,2BACCF,UAAS,UAAKC,IAAQE,QAAb,YAAwBF,IAAQG,MACzC/B,KAAK,cACLgC,OAAO,mCACPC,KAAK,OACLC,SAAU,SAACR,GAAD,OAAK,EAAKS,kBAAkBT,MAGvC,2BACAC,UAAS,UAAKC,IAAQG,KAAb,YAAqBH,IAAQQ,UACtCH,KAAK,SACLI,MAAM,oBAIN,yBAAKV,UAAWC,IAAQU,iBAAiB,4BAAQC,QAAS7B,KAAKD,UAAWkB,UAAWa,IAAYC,YAAxD,4CACnD,yBAAKd,UAAWC,IAAQc,gBAE7BhC,KAAK9B,MAAME,QACR,yBAAK6D,IAAKjC,KAAK9B,MAAME,UACrB,yBAAK6D,IAAKC,Y,GA7FaC,aAsGZlE","file":"static/js/13.7a2d931a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Category\":\"addBook_Category__dlvdX\",\"categoriesContainer\":\"addBook_categoriesContainer__2Gkjs\",\"frameContainer\":\"addBook_frameContainer__oVIwQ\",\"fileAdd\":\"addBook_fileAdd__a2Xcg\",\"inptsContainer\":\"addBook_inptsContainer__2wgYG\",\"fileSbmt\":\"addBook_fileSbmt__1c8NE\",\"buttonContainer\":\"addBook_buttonContainer__2ol1t\",\"writingContainer\":\"addBook_writingContainer__2eQ8r\",\"newChapContainer\":\"addBook_newChapContainer__2ShKR\",\"delAkapit\":\"addBook_delAkapit__2jk60\",\"oneUp\":\"addBook_oneUp__xAl5_\",\"oneDown\":\"addBook_oneDown__M38nc\",\"BackgroundForBook\":\"addBook_BackgroundForBook__13gGK\"};","import React,{Component} from 'react'\nimport { adresse } from '../../config';\nimport { getUser } from '../../services/auth';\nimport classes from '../../styles/addBook.module.scss'\nimport classesRoot from '../../styles/index.module.scss'\nimport axios from 'axios'\nimport empty from '../../assets/images/empty.png'\nimport {Redirect} from 'react-router-dom'\n\n\nclass AddBookCover extends Component {\n    state ={\n        file: 'file',\n        preview: null,\n        id: '',\n        sent: false,\n        error: '',\n        btnCt: '',\n        redirect: false,\n    }\n\n    componentDidMount(){\n      let {id} = this.props.match.params\n      this.setState({id: id})\n    }\n\n\n\n    addImg = (event) => {\n      event.preventDefault()\n\n        const url = `${adresse}books/mine/addImage/${this.state.id}`\n        const headers = { 'content-type': 'formData',\n        'Authorization': 'Bearer ' + `${getUser().token}`\n        }\n        let data = new FormData(event.target);\n    \n        data.append('booksImages',this.state.file.name);\n        axios.post(url, data, {\n          headers: headers\n      })\n    .then(res => { // then print response status\n        this.setState({sent: true,\n                       error: ''})\n     }).catch(error => {\n      console.log(error);\n      this.setState({sent: false, error: 'Coś poszło nie tak. Zdjęcie musi być w formacie png lub jpg i mieć nie więcej niż 1 Mb.'})\n  });\n    }\n\n      handleImageChange(event) {\n        event.preventDefault();\n    \n        let reader = new FileReader();\n        let file = event.target.files[0];\n    \n        reader.onloadend = () => {\n          this.setState({\n            file: file,\n            preview: reader.result\n          });\n        }\n    \n        reader.readAsDataURL(file)\n      }\n      goFurther = ()=>{\n        if(this.state.sent === true){\n        this.setState({redirect: true})\n        }else {\n          this.setState({error: 'Zdjęcie musi być dodane'})\n        }\n      }\n\n    render(){\n        if(this.state.redirect === true){\n          return <Redirect to={`/myBooks/${this.state.id}/writing`} />\n        }\n        return (\n            <div>\n                 <div style={{color: 'red',width: '100%', height: '50px'}}>{this.state.error}</div>\n               <form onSubmit={(e)=>this.addImg(e)}>\n                <div className={classes.inptsContainer}>\n\n                <input\n                 className={`${classes.fileAdd} ${classes.inpt}`}\n                 name=\"booksImages\"\n                 accept=\"image/png, image/jpeg, image/jpg\"\n                 type=\"file\"\n                 onChange={(e)=>this.handleImageChange(e)}\n                 />\n                \n                <input \n                className={`${classes.inpt} ${classes.fileSbmt}`}\n                type=\"submit\"\n                value=\"Prześlij\"\n                />\n                </div>\n                </form>\n                <div className={classes.buttonContainer}><button onClick={this.goFurther} className={classesRoot.typicalBtn}>Chcę przejść do pisania!</button></div>\n      <div className={classes.frameContainer}>\n\n{this.state.preview ?\n    <img src={this.state.preview} /> :\n    <img src={empty} />\n}\n\n    </div>\n            </div>\n        )\n    }\n}\n\nexport default AddBookCover"],"sourceRoot":""}