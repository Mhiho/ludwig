{"version":3,"sources":["styles/books.module.scss","components/Books/Books.js"],"names":["module","exports","Books","_isMounted","state","isLoading","books","url","leftUrl","rightUrl","id","opacity","panel","showEmpty","this","arrayBufferToBase64","buffer","binary","slice","call","Uint8Array","forEach","b","String","fromCharCode","window","btoa","fetch","adresse","then","response","json","shuffledTen","sort","Math","random","setState","undefined","coverUrl","data","array","prevProps","prevState","length","console","log","style","marginTop","width","height","display","justifyContent","alignItems","className","loading","loader","classes","Container","Buttons","left","onClick","narrowLeft","right","narrowRight","Slider","Cover","to","Slide","src","upTitle","title","upPanel","map","book","index","changeSlideCircle","activeCircle","changeSlide","Component"],"mappings":"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","file":"static/js/16.e495bd07.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Slider\":\"books_Slider__2MA9y\",\"Slide\":\"books_Slide__3w9SK\",\"Credits\":\"books_Credits__29Kb1\",\"Description\":\"books_Description__P1rIz\",\"Buttons\":\"books_Buttons__cSqRC\",\"left\":\"books_left__1Un_s\",\"right\":\"books_right__FWvtJ\",\"slideLeft\":\"books_slideLeft__2Bc5t\",\"slideRight\":\"books_slideRight__3RaJK\",\"opacity\":\"books_opacity__1TjoB\",\"nonopacity\":\"books_nonopacity__QT6_4\",\"nopacity\":\"books_nopacity__3okSQ\",\"title\":\"books_title__MxAxl\",\"upTitle\":\"books_upTitle__2ZpsP\",\"upPanel\":\"books_upPanel__2e8ZB\",\"panel\":\"books_panel__3oqO5\",\"changeSlideCircle\":\"books_changeSlideCircle__1k6S2\",\"Cover\":\"books_Cover__18ka7\",\"activeCircle\":\"books_activeCircle__GqskM\"};","import React,{Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport {adresse} from '../../config'\nimport classes from '../../styles/books.module.scss'\nimport empty from '../../assets/images/empty.png'\nimport loading from '../../styles/app.module.scss'\n\n\nconst base64Flag = 'data:image/jpeg;base64,';\nclass Books extends Component {\n  _isMounted = false;\n\n  state={\n    isLoading: true,\n    books: [],\n    url: null,\n    leftUrl: null,\n    rightUrl: null,\n    id: 0,\n    opacity: false,\n    panel: [false,false,false,false,false,false,false,false,false,false],\n    showEmpty: false\n  }\n  componentDidMount() {\n    this._isMounted = true;\n    const arrayBufferToBase64 = (buffer) => {\n          var binary = '';\n          var bytes = [].slice.call(new Uint8Array(buffer));\n          bytes.forEach((b) => binary += String.fromCharCode(b));\n          return window.btoa(binary);\n    };\n    fetch(`${adresse}books/all`)\n    .then(response => response.json())\n      .then(books => {\n        const shuffled = books.sort(() => 0.5 - Math.random())\n        const shuffledTen = shuffled.slice(0,10)        \n        this.setState({ books: shuffledTen }, ()=>{\n        if(\n           this.state.books[this.state.id].coverUrl !== undefined\n           ){\n        this.setState({url: arrayBufferToBase64(this.state.books[this.state.id].coverUrl.data),\n                       opacity: true},()=>{\n                        this.setState({isLoading: false})\n                       })\n        }\n      })\n \n    });\n    let array = this.state.panel\n    array[this.state.id] = true\n    this.setState({panel: array})\n  }\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n  componentDidUpdate(prevProps, prevState){\n    const arrayBufferToBase64 = (buffer) => {\n      var binary = '';\n      var bytes = [].slice.call(new Uint8Array(buffer));\n      bytes.forEach((b) => binary += String.fromCharCode(b));\n      return window.btoa(binary);\n  };\n    if(prevState.id !== this.state.id && this.state.opacity === false){\n      this.setState({opacity: true})\n    }\n    if(prevState.id !== this.state.id && this.state.books[this.state.id].url !== undefined){ \n      this.setState({url: arrayBufferToBase64(this.state.books[this.state.id].url.data)}\n      )\n    }\n    if(prevState.id !== this.state.id && this.state.books[this.state.id].url === undefined){\n      this.setState({url: null})\n    }\n    if(prevState.id !== this.state.id){\n      let array = [false,false,false,false,false,false,false,false,false,false]\n      array[this.state.id] = true\n      this.setState({panel: array})\n    }\n  }\n  narrowLeft(){\n    this.state.id <= 0 ? this.setState({id: this.state.books.length - 1}) : this.setState({id: this.state.id -1,opacity: false})\n  }\n  narrowRight(){\n    this.state.id >= this.state.books.length-1 ? this.setState({id: 0}) : this.setState({id: this.state.id + 1, opacity: false})\n  }\n  changeSlide(id){\n    this.setState({id: id})\n  }\n  render(){\n    console.log(this.state.books[this.state.id])\n    if(this.state.isLoading === true) { return(<div style={{marginTop: '-180px',width: '100vw', height: '100vh', display: 'flex', justifyContent: 'center', alignItems: 'center'}}><div className={loading.loader}></div></div>)}\n    return (\n        <div className={classes.Container}>\n        <div className={classes.Buttons}>\n              <span className={classes.left} onClick={()=>this.narrowLeft()}>←</span>\n              <span className={classes.right} onClick={()=>this.narrowRight()}>→</span>\n        </div>\n        <div>\n      \n        <div className={classes.Slider}>\n            \n           <div className={classes.Cover}>\n\n            <Link to={`/sample/${this.state.books[this.state.id].id}`}><img className={this.state.opacity ? `${classes.opacity} ${classes.Slide}` : `${classes.Slide}`} src={ !this.state.url ? null : base64Flag + this.state.url }/>\n              <div className={classes.upTitle}><p className={classes.title}>{this.state.books.length == 0 ? null : this.state.books[this.state.id].title}</p></div>\n            </Link>\n            <div className={classes.upPanel}> <div className={classes.panel}> {this.state.books.map((book,index)=> <span className={ this.state.panel[index] === false ? `${classes.changeSlideCircle}` : `${classes.changeSlideCircle} ${classes.activeCircle}` } onClick={()=>this.changeSlide(index)}>○</span>)} </div></div>\n           </div>\n        </div>\n      </div>\n      </div>\n    )\n  }\n}\n\n\nexport default Books"],"sourceRoot":""}