(this.webpackJsonpvanessa=this.webpackJsonpvanessa||[]).push([[13],{114:function(e,t,a){"use strict";a.r(t);var n=a(21),o=a(22),i=a(24),r=a(23),c=a(25),s=a(0),d=a.n(s),l=a(16),m=a(10),p=a(97),u=a.n(p),_=a(1),g=a.n(_),f=a(43),h=a.n(f),k=a(42),C=a.n(k),v=a(12),b=function(e){function t(){var e,a;Object(n.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(c)))).state={file:"file",preview:null,id:"",sent:!1,error:"",btnCt:"",redirect:!1},a.addImg=function(e){e.preventDefault();var t="".concat(l.a,"books/mine/addImage/").concat(a.state.id),n={"content-type":"formData",Authorization:"Bearer "+"".concat(Object(m.a)().token)},o=new FormData(e.target);o.append("booksImages",a.state.file.name),h.a.post(t,o,{headers:n}).then((function(e){a.setState({sent:!0,error:""})})).catch((function(e){console.log(e),a.setState({sent:!1,error:"Co\u015b posz\u0142o nie tak. Zdj\u0119cie musi by\u0107 w formacie png lub jpg i mie\u0107 nie wi\u0119cej ni\u017c 1 Mb."})}))},a.goFurther=function(){!0===a.state.sent?a.setState({redirect:!0}):a.setState({error:"Zdj\u0119cie musi by\u0107 dodane"})},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.setState({id:e})}},{key:"handleImageChange",value:function(e){var t=this;e.preventDefault();var a=new FileReader,n=e.target.files[0];a.onloadend=function(){t.setState({file:n,preview:a.result})},a.readAsDataURL(n)}},{key:"render",value:function(){var e=this;return!0===this.state.redirect?d.a.createElement(v.a,{to:"/myBooks/".concat(this.state.id,"/writing")}):d.a.createElement("div",null,d.a.createElement("div",{style:{color:"red",width:"100%",height:"50px"}},this.state.error),d.a.createElement("form",{onSubmit:function(t){return e.addImg(t)}},d.a.createElement("div",{className:u.a.inptsContainer},d.a.createElement("input",{className:"".concat(u.a.fileAdd," ").concat(u.a.inpt),name:"booksImages",accept:"image/png, image/jpeg, image/jpg",type:"file",onChange:function(t){return e.handleImageChange(t)}}),d.a.createElement("input",{className:"".concat(u.a.inpt," ").concat(u.a.fileSbmt),type:"submit",value:"Prze\u015blij"}))),d.a.createElement("div",{className:u.a.buttonContainer},d.a.createElement("button",{onClick:this.goFurther,className:g.a.typicalBtn},"Chc\u0119 przej\u015b\u0107 do pisania!")),d.a.createElement("div",{className:u.a.frameContainer},this.state.preview?d.a.createElement("img",{src:this.state.preview}):d.a.createElement("img",{src:C.a})))}}]),t}(s.Component);t.default=b},97:function(e,t,a){e.exports={Category:"addBook_Category__dlvdX",categoriesContainer:"addBook_categoriesContainer__2Gkjs",frameContainer:"addBook_frameContainer__oVIwQ",fileAdd:"addBook_fileAdd__a2Xcg",inptsContainer:"addBook_inptsContainer__2wgYG",fileSbmt:"addBook_fileSbmt__1c8NE",buttonContainer:"addBook_buttonContainer__2ol1t",writingContainer:"addBook_writingContainer__2eQ8r",newChapContainer:"addBook_newChapContainer__2ShKR",delAkapit:"addBook_delAkapit__2jk60",oneUp:"addBook_oneUp__xAl5_",oneDown:"addBook_oneDown__M38nc",BackgroundForBook:"addBook_BackgroundForBook__13gGK"}}}]);
//# sourceMappingURL=13.c2067e82.chunk.js.map