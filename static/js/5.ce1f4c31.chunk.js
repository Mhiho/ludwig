(this.webpackJsonpvanessa=this.webpackJsonpvanessa||[]).push([[5],{126:function(e,t,a){e.exports={Category:"addBook_Category__dlvdX",categoriesContainer:"addBook_categoriesContainer__2Gkjs",frameContainer:"addBook_frameContainer__oVIwQ",fileAdd:"addBook_fileAdd__a2Xcg",inptsContainer:"addBook_inptsContainer__2wgYG",fileSbmt:"addBook_fileSbmt__1c8NE",buttonContainer:"addBook_buttonContainer__2ol1t",writingContainer:"addBook_writingContainer__2eQ8r",newChapContainer:"addBook_newChapContainer__2ShKR",delAkapit:"addBook_delAkapit__2jk60",oneUp:"addBook_oneUp__xAl5_",oneDown:"addBook_oneDown__M38nc",BackgroundForBook:"addBook_BackgroundForBook__13gGK"}},127:function(e,t,a){"use strict";var n=a(40);var o=a(50);function r(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(t,"a",(function(){return r}))},130:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(131),o=Object.prototype.hasOwnProperty,r=Array.prototype.splice,i=Object.prototype.toString;function c(e){return i.call(e).slice(8,-1)}var s=Object.assign||function(e,t){return u(t).forEach((function(a){o.call(t,a)&&(e[a]=t[a])})),e},u="function"===typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function l(e){return Array.isArray(e)?s(e.constructor(e.length),e):"Map"===c(e)?new Map(e):"Set"===c(e)?new Set(e):e&&"object"===typeof e?s(Object.create(Object.getPrototypeOf(e)),e):e}var p=function(){function e(){this.commands=s({},d),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var a=this,r="function"===typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(r)||n(!Array.isArray(r),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),n("object"===typeof r&&null!==r,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var i=e;return u(r).forEach((function(t){if(o.call(a.commands,t)){var n=e===i;i=a.commands[t](r[t],i,r,e),n&&a.isEquals(i,e)&&(i=e)}else{var s="Map"===c(e)?a.update(e.get(t),r[t]):a.update(e[t],r[t]),u="Map"===c(i)?i.get(t):i[t];a.isEquals(s,u)&&("undefined"!==typeof s||o.call(e,t))||(i===e&&(i=l(e)),"Map"===c(i)?i.set(t,s):i[t]=s)}})),i},e}();t.Context=p;var d={$push:function(e,t,a){return f(t,a,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,a){return f(t,a,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,a,o){return function(e,t){n(Array.isArray(e),"Expected $splice target to be an array; got %s",e),y(t.$splice)}(t,a),e.forEach((function(e){y(e),t===o&&e.length&&(t=l(o)),r.apply(t,e)})),t},$set:function(e,t,a){return function(e){n(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(a),e},$toggle:function(e,t){m(e,"$toggle");var a=e.length?l(t):t;return e.forEach((function(e){a[e]=!t[e]})),a},$unset:function(e,t,a,n){return m(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=l(n)),delete t[e])})),t},$add:function(e,t,a,n){return g(t,"$add"),m(e,"$add"),"Map"===c(t)?e.forEach((function(e){var a=e[0],o=e[1];t===n&&t.get(a)!==o&&(t=l(n)),t.set(a,o)})):e.forEach((function(e){t!==n||t.has(e)||(t=l(n)),t.add(e)})),t},$remove:function(e,t,a,n){return g(t,"$remove"),m(e,"$remove"),e.forEach((function(e){t===n&&t.has(e)&&(t=l(n)),t.delete(e)})),t},$merge:function(e,t,a,o){var r,i;return r=t,n((i=e)&&"object"===typeof i,"update(): $merge expects a spec of type 'object'; got %s",i),n(r&&"object"===typeof r,"update(): $merge expects a target of type 'object'; got %s",r),u(e).forEach((function(a){e[a]!==t[a]&&(t===o&&(t=l(o)),t[a]=e[a])})),t},$apply:function(e,t){var a;return n("function"===typeof(a=e),"update(): expected spec of $apply to be a function; got %s.",a),e(t)}},h=new p;function f(e,t,a){n(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",a,e),m(t[a],a)}function m(e,t){n(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function y(e){n(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function g(e,t){var a=c(e);n("Map"===a||"Set"===a,"update(): %s expects a target of type Set or Map; got %s",t,a)}t.isEquals=h.update.isEquals,t.extend=h.extend,t.default=h.update,t.default.default=e.exports=s(t.default,t)},131:function(e,t,a){"use strict";e.exports=function(e,t,a,n,o,r,i,c){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[a,n,o,r,i,c],l=0;(s=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},148:function(e,t,a){"use strict";a.r(t);var n=a(127),o=a(30),r=a(31),i=a(33),c=a(32),s=a(0),u=a.n(s),l=a(16),p=a(17),d=a(11),h=a.n(d),f=a(126),m=a.n(f),y=a(9),g=a(130),v=a.n(g),b=a(26),k=a(14),E=a(35),w=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={book:{},id:"",img:"",changeGenre:!1,changeCat:!1,cat:[],genre:"",loaded:!1,deleted:!1,validation:!1,showInput:!1,inp:""},e.addCat=function(t){var a={"Content-Type":"application/json",Authorization:"Bearer "+Object(p.a)().token},o=Object(n.a)(e.state.cat);o=[].concat(Object(n.a)(o),[t.target.value]);var r=Object(n.a)(new Set(o));e.setState({cat:r},(function(){fetch("".concat(l.a,"/books/mine/patchCat/").concat(e.state.id),{method:"PATCH",headers:a,body:JSON.stringify({categories:e.state.cat})}).then((function(e){return e.ok,e.json()})).then((function(e){}))}))},e.changeGenre=function(t){e.setState({genre:t.target.value},(function(){var t={"Content-Type":"application/json",Authorization:"Bearer "+Object(p.a)().token},a=e.props.match.params.id;e.setState({id:a},(function(){fetch("".concat(l.a,"/books/mine/patchGenre/").concat(e.state.id),{method:"PATCH",headers:t,body:JSON.stringify({genre:e.state.genre})}).then((function(e){return e.ok,e.json()})).then((function(e){}))}))}))},e.deleteBook=function(){e.setState({showInput:!e.state.showInput})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={"Content-Type":"application/json",Authorization:"Bearer "+Object(p.a)().token},a=this.props.match.params.id;this.setState({id:a},(function(){fetch("".concat(l.a,"/books/mine/").concat(e.state.id),{headers:t}).then((function(e){return e.json()})).then((function(t){e.setState({book:t,cat:t.categories},(function(){e.setState({loaded:!0})}))}))}))}},{key:"deleteCategory",value:function(e){var t=this.state.cat;t.splice(e,1),this.setState({cat:t});var a={"Content-Type":"application/json",Authorization:"Bearer "+Object(p.a)().token};fetch("".concat(l.a,"/books/mine/patchCat/").concat(this.state.id),{method:"PATCH",headers:a,body:JSON.stringify({categories:this.state.cat})}).then((function(e){return e.ok,e.json()})).then((function(e){}))}},{key:"chagnerGenreHandler",value:function(){this.setState({changeGenre:!this.state.changeGenre})}},{key:"chagnerCatHandler",value:function(){this.setState({changeCat:!this.state.changeCat})}},{key:"componentDidUpdate",value:function(e,t){t.book.genre!==this.state.genre&&""!==this.state.genre&&this.setState({book:v()(this.state.book,{genre:{$set:this.state.genre}}),changeGenre:!1})}},{key:"validationHandler",value:function(e){var t=this,a={"Content-Type":"application/json",Authorization:"Bearer "+Object(p.a)().token};!0===this.state.validation&&b.a.delete("".concat(l.a,"/books/mine/deleteBook/").concat(e),{headers:a,data:JSON.stringify({id:e})}).then((function(e){return e})).then((function(e){return t.props.history.push("/")}))}},{key:"render",value:function(){var e=this;return console.log(this.state.cat),u.a.createElement("div",{className:m.a.BackgroundForBook},u.a.createElement("h2",null,this.state.book.title),u.a.createElement("div",{className:m.a.writingContainer},u.a.createElement("img",{src:"".concat(l.a,"/").concat(this.state.book.coverUrl),alt:"cover"})),u.a.createElement("div",{className:m.a.writingContainer},u.a.createElement("p",null,"Rodzaj literacki: \xa0\xa0"),this.state.changeGenre?u.a.createElement("div",null,u.a.createElement("select",{value:this.state.genre,onChange:function(t){return e.changeGenre(t)}},u.a.createElement("option",{value:""}),u.a.createElement("option",{value:"Krymina\u0142"},"Krymina\u0142"),u.a.createElement("option",{value:"Powie\u015b\u0107 psychologiczna"},"Powie\u015b\u0107 psychologiczna"),u.a.createElement("option",{value:"Powie\u015b\u0107 romantyczna"},"Powie\u015b\u0107 romantyczna"),u.a.createElement("option",{value:"Powie\u015b\u0107 obyczajowa"},"Powie\u015b\u0107 obyczajowa"),u.a.createElement("option",{value:"Eseje"},"Eseje"),u.a.createElement("option",{value:"Thriller"},"Thriller"),u.a.createElement("option",{value:"Powie\u015b\u0107 humorystyczna"},"Powie\u015b\u0107 humorystycza"),u.a.createElement("option",{value:"Horror"},"Horror"),u.a.createElement("option",{value:"Si-fi"},"Si-Fi"),u.a.createElement("option",{value:"Fantastyka"},"Fantastyka"),u.a.createElement("option",{value:"Literatura faktu"},"Literatura faktu"),u.a.createElement("option",{value:"Dla dzieci i m\u0142odzie\u017cy"},"Dla dzieci i m\u0142odzie\u017cy"))):u.a.createElement("p",null,this.state.book.genre),u.a.createElement(E.a,{icon:k.d,onClick:function(){return e.chagnerGenreHandler()}})),u.a.createElement("div",{className:m.a.writingContainer},u.a.createElement("p",null,"Kategoria: \xa0\xa0"),this.state.cat?this.state.changeCat?u.a.createElement("div",null,u.a.createElement("select",{multiple:!0,value:this.state.cat,onChange:this.addCat},u.a.createElement("option",{value:"czytad\u0142o"},"czytad\u0142o"),u.a.createElement("option",{value:"nowela"},"nowela"),u.a.createElement("option",{value:"borgesowska"},"borgesowska"),u.a.createElement("option",{value:"realizm magiczny"},"realizm magiczny"),u.a.createElement("option",{value:"opera mydlana"},"opera mydlana"),u.a.createElement("option",{value:"dekadencja"},"dekadencja"),u.a.createElement("option",{value:"romantyzm"},"romantyzm"),u.a.createElement("option",{value:"klasycznie"},"klasycznie"),u.a.createElement("option",{value:"cyberpunk"},"cyberpunk"),u.a.createElement("option",{value:"przy \u015bwiecy"},"przy \u015bwiecy"),u.a.createElement("option",{value:"kropla dr\u0105\u017cy ska\u0142\u0119"},"kropla dr\u0105\u017cy ska\u0142\u0119"),u.a.createElement("option",{value:"brutalna"},"brutalna"),u.a.createElement("option",{value:"abstrakcja"},"abstrakcja"),u.a.createElement("option",{value:"ko\u015bci zosta\u0142y rzucone"},"ko\u015bci zosta\u0142y rzucone"))):this.state.cat.map((function(t,a){return u.a.createElement("p",null,t,u.a.createElement("strong",{onClick:function(){return e.deleteCategory(a)}},"\xd7 "))})):null,u.a.createElement(E.a,{icon:k.d,onClick:function(){return e.chagnerCatHandler()}})),u.a.createElement("div",{className:m.a.writingContainer},this.state.book.description),u.a.createElement("div",{className:m.a.writingContainer},this.state.book.sample),u.a.createElement("div",{className:m.a.writingContainer},this.state.book.year),u.a.createElement("div",null,u.a.createElement("h3",null,"Rozdzia\u0142y"),this.state.book.chapters&&this.state.book.chapters.map((function(t,a){return u.a.createElement(y.b,{key:a,to:"/myBooks/".concat(e.state.id,"/chapters/").concat(a)},u.a.createElement("button",{className:h.a.typicalBtn},t.chapTitle))})),this.state.book.chapters&&this.state.book.chapters.length>0?u.a.createElement(y.b,{to:"/myBooks/".concat(this.state.id,"/chapters/").concat(this.state.book.chapters.length)},u.a.createElement("button",null,"Nowy rozdzia\u0142")):u.a.createElement(y.b,{to:"/myBooks/".concat(this.state.id,"/chapters/0")},u.a.createElement("button",null,"Zacznij pisa\u0107"))),u.a.createElement("button",{onClick:function(){return e.deleteBook(e.state.id)}},"Usuwam ten bullshit"),!0===this.state.showInput?u.a.createElement("div",null,u.a.createElement("label",null,"Wpisz tytu\u0142 ksi\u0105\u017cki i potwierd\u017a usuni\u0119cie ksi\u0105\u017cki"),u.a.createElement("input",{value:this.state.inp,onChange:function(t){return e.setState({inp:t.target.value,validation:t.target.value===e.state.book.title})}}),u.a.createElement("button",{onClick:function(){return e.validationHandler(e.state.id)}},"Potwierdzam usuni\u0119cie")):null)}}]),a}(s.Component);t.default=w}}]);
//# sourceMappingURL=5.ce1f4c31.chunk.js.map