{"version":3,"sources":["styles/login.module.scss","components/Login/Login.js"],"names":["module","exports","Login","useContext","ThemeContext","setLogged","logged","useState","email","setEmail","password","setPassword","info","setInfo","history","useHistory","handleSubmit","event","preventDefault","requestOptions","method","headers","body","JSON","stringify","fetch","adresse","then","response","ok","json","user","token","window","localStorage","setItem","setUser","push","className","classes","Container","pageTitle","style","height","width","onSubmit","e","emailInp","emailField","type","name","onChange","target","value","submitContainer","marginLogin","signUpButton","to"],"mappings":"wFACAA,EAAOC,QAAU,CAAC,gBAAkB,+BAA+B,aAAe,4BAA4B,UAAY,yBAAyB,kBAAoB,iCAAiC,SAAW,wBAAwB,WAAa,0BAA0B,YAAc,6B,6HC+FjRC,UAxFD,WAAO,IAAD,EACYC,qBAAWC,KAAzBC,GADE,EACVC,OADU,EACFD,WADE,EAEQE,mBAAS,IAFjB,mBAEXC,EAFW,KAEJC,EAFI,OAGcF,mBAAS,IAHvB,mBAGXG,EAHW,KAGDC,EAHC,OAIMJ,mBAAS,IAJf,mBAIXK,EAJW,KAILC,EAJK,KAKZC,EAAUC,cACVC,EAAe,SAACC,GAEpB,GADAA,EAAMC,iBACQ,KAAVV,GAA6B,KAAbE,EAAiB,CACnC,IAAMS,EAAiB,CACrBC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CACnBhB,MAAOA,EACPE,SAAUA,KAMde,MAAM,GAAD,OAAIC,IAAJ,gBAA2BP,GAC7BQ,MAAK,SAACC,GAIL,OAHKA,EAASC,IACZhB,EAAQ,6BAEHe,EAASE,UAEjBH,MAAK,SAACI,GASL,OAPIA,EAAKC,SAXG,SAACD,GACfE,OAAOC,aAAaC,QAAQ,OAAQZ,KAAKC,UAAUO,IAY/CK,CAAQL,GACR1B,GAAU,IAEZA,GAAU,GACVS,EAAQuB,KAAK,cACNN,OAKf,OACE,oCACE,yBAAKO,UAAWC,IAAQC,WACtB,wBAAIF,UAAWC,IAAQE,WAAvB,YACA,wBAAIC,MAAO,CAAEC,OAAQ,OAAQC,MAAO,SAAWhC,GAC/C,0BAAMQ,OAAO,OAAOyB,SAAU,SAACC,GAAD,OAAO9B,EAAa8B,KAChD,+BACE,0BAAMR,UAAWC,IAAQQ,UAAzB,SACA,2BACET,UAAWC,IAAQS,WACnBC,KAAK,QACLC,KAAK,QACLC,SAAU,SAACL,GAAD,OAAOrC,EAASqC,EAAEM,OAAOC,QACnCA,MAAO7C,KAGX,+BACE,0BAAM8B,UAAWC,IAAQQ,UAAzB,cACA,2BACET,UAAWC,IAAQS,WACnBC,KAAK,WACLC,KAAK,WACLC,SAAU,SAACL,GAAD,OAAOnC,EAAYmC,EAAEM,OAAOC,QACtCA,MAAO3C,KAGX,yBAAK4B,UAAS,UAAKC,IAAQe,gBAAb,YAAgCf,IAAQgB,cACpD,2BACEjB,UAAWC,IAAQS,WACnBC,KAAK,SACLI,MAAM,cAIZ,yBAAKf,UAAWC,IAAQe,iBACtB,4BAAQhB,UAAS,UAAKC,IAAQiB,eAC5B,kBAAC,IAAD,CAAMC,GAAG,WAAT,qBAGJ,yBAAKnB,UAAWC,IAAQe,iBACtB,kBAAC,IAAD,CAAMG,GAAG,kBAAT","file":"static/js/17.c42776ce.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"submitContainer\":\"login_submitContainer__2DVxR\",\"signUpButton\":\"login_signUpButton__8sgdX\",\"pageTitle\":\"login_pageTitle__1NHe2\",\"pageTitleHomePage\":\"login_pageTitleHomePage__37je0\",\"emailInp\":\"login_emailInp__2JpwB\",\"emailField\":\"login_emailField__1AQWh\",\"marginLogin\":\"login_marginLogin__pEOjC\"};","import classes from \"../../styles/login.module.scss\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { isLoggedIn, getUser, login } from \"../../services/auth\";\nimport { adresse } from \"../../config\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { ThemeContext } from \"../../store/ContextAPI\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Login = () => {\n  const { logged, setLogged } = useContext(ThemeContext);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [info, setInfo] = useState(\"\");\n  const history = useHistory();\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (email !== \"\" && password !== \"\") {\n      const requestOptions = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          email: email,\n          password: password,\n        }),\n      };\n\n      const setUser = (user) =>\n        window.localStorage.setItem(\"user\", JSON.stringify(user));\n      fetch(`${adresse}/users/login`, requestOptions)\n        .then((response) => {\n          if (!response.ok) {\n            setInfo(\"Błąd logowania!\");\n          }\n          return response.json();\n        })\n        .then((user) => {\n          // login successful if there's a jwt token in the response\n          if (user.token) {\n            // store user details and jwt token in local storage to keep user logged in between page refreshes\n            setUser(user);\n            setLogged(true);\n          }\n          setLogged(true);\n          history.push(\"/myProfile\");\n          return user;\n        });\n    }\n  };\n\n  return (\n    <>\n      <div className={classes.Container}>\n        <h2 className={classes.pageTitle}>Zaloguj:</h2>\n        <h3 style={{ height: \"40px\", width: \"100%\" }}>{info}</h3>\n        <form method=\"post\" onSubmit={(e) => handleSubmit(e)}>\n          <label>\n            <span className={classes.emailInp}>Email</span>\n            <input\n              className={classes.emailField}\n              type=\"email\"\n              name=\"email\"\n              onChange={(e) => setEmail(e.target.value)}\n              value={email}\n            />\n          </label>\n          <label>\n            <span className={classes.emailInp}>Hasło</span>\n            <input\n              className={classes.emailField}\n              type=\"password\"\n              name=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n              value={password}\n            />\n          </label>\n          <div className={`${classes.submitContainer} ${classes.marginLogin}`}>\n            <input\n              className={classes.emailField}\n              type=\"submit\"\n              value=\"Zaloguj\"\n            />\n          </div>\n        </form>\n        <div className={classes.submitContainer}>\n          <button className={`${classes.signUpButton}`}>\n            <Link to=\"/signUp\">Utwórz konto</Link>\n          </button>\n        </div>\n        <div className={classes.submitContainer}>\n          <Link to=\"/resetPassword\">Zapomniałeś hasła?</Link>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}