{"version":3,"sources":["styles/books.module.scss","components/Books/Sample.js"],"names":["module","exports","Sample","props","state","id","book","loading","purchased","chapterNr","this","fetchCheckpoints","match","params","console","log","setState","checkpoints","find","bookId","checkpointCh","chpaterNr","url","adresse","headers","Authorization","getUser","token","axios","get","responseGate","data","flag","response","style","marginTop","width","height","display","justifyContent","alignItems","className","loader","sample","to","classes","btnChaptitle","Component","connect","checkpointsReadingState","dispatch"],"mappings":"wFACAA,EAAOC,QAAU,CAAC,OAAS,sBAAsB,MAAQ,qBAAqB,QAAU,uBAAuB,YAAc,2BAA2B,QAAU,uBAAuB,KAAO,oBAAoB,MAAQ,qBAAqB,UAAY,yBAAyB,WAAa,0BAA0B,QAAU,uBAAuB,WAAa,0BAA0B,SAAW,wBAAwB,MAAQ,qBAAqB,QAAU,uBAAuB,QAAU,uBAAuB,MAAQ,qBAAqB,kBAAoB,iCAAiC,MAAQ,qBAAqB,aAAe,8B,uMCS/nBC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAQ,CACXC,GAAI,KACJC,KAAM,GACNC,SAAS,EACTC,WAAW,EACXC,UAAW,GAPI,E,mNAWXC,KAAKP,MAAMQ,mB,uBACED,KAAKP,MAAMS,MAAMC,O,uBAA9BR,E,EAAAA,GACNS,QAAQC,IAAIV,GACZK,KAAKM,SAAS,CAAEX,GAAIA,I,UACDK,KAAKP,MAAMc,YAAYA,YAAYC,MACpD,SAACZ,GAAD,OAAUA,EAAKa,SAAW,EAAKf,MAAMC,M,eADjCC,E,OAGNQ,QAAQC,IAAIT,GAERA,EACFI,KAAKM,SAAS,CAAEP,UAAWH,EAAKc,eAEhCV,KAAKM,SAAS,CAAEK,UAAW,IAE7BP,QAAQC,IAAIL,KAAKN,MAAMK,WACvBK,QAAQC,IAAIL,KAAKJ,MACXgB,E,UAASC,I,gCAA+Bb,KAAKN,MAAMC,IACnDmB,EAAU,CACd,eAAgB,mBAChBC,cAAe,UAAYC,cAAUC,O,UAEZC,IAAMC,IAAIP,EAAK,CACxCE,QAASA,I,eADLM,E,OAGNpB,KAAKM,SAAS,CAAER,UAAWsB,EAAaC,KAAKC,O,UACtBJ,IAAMC,IAAN,UAClBN,IADkB,yBACMb,KAAKN,MAAMC,K,QADlC4B,E,OAINvB,KAAKM,SAAS,CAAEV,KAAM2B,EAASF,OAAQ,WACrC,EAAKf,SAAS,CAAET,SAAS,O,sIAI3B,OAAIG,KAAKN,MAAMG,QAEX,yBACE2B,MAAO,CACLC,UAAW,SACXC,MAAO,QACPC,OAAQ,QACRC,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAGd,yBAAKC,UAAWlC,IAAQmC,UAK5B,6BACE,6BACGhC,KAAKN,MAAME,KACRI,KAAKN,MAAME,KAAKqC,OAChB,mEAGN,kBAAC,IAAD,CACEC,GACElC,KAAKN,MAAMI,UAAX,WACQE,KAAKN,MAAMC,GADnB,oBACiCK,KAAKN,MAAMK,WACxC,KAGN,4BAAQgC,UAAWI,IAAQC,cAA3B,sB,GA7EWC,aA8FNC,uBAVS,SAAC5C,GAAD,MAAY,CAClCa,YAAab,EAAM6C,4BAGM,SAACC,GAC1B,MAAO,CACLvC,iBAAkB,kBAAMuC,EAASvC,mBAItBqC,CAA6C9C","file":"static/js/15.1a084f3e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Slider\":\"books_Slider__2MA9y\",\"Slide\":\"books_Slide__3w9SK\",\"Credits\":\"books_Credits__29Kb1\",\"Description\":\"books_Description__P1rIz\",\"Buttons\":\"books_Buttons__cSqRC\",\"left\":\"books_left__1Un_s\",\"right\":\"books_right__FWvtJ\",\"slideLeft\":\"books_slideLeft__2Bc5t\",\"slideRight\":\"books_slideRight__3RaJK\",\"opacity\":\"books_opacity__1TjoB\",\"nonopacity\":\"books_nonopacity__QT6_4\",\"nopacity\":\"books_nopacity__3okSQ\",\"title\":\"books_title__MxAxl\",\"upTitle\":\"books_upTitle__2ZpsP\",\"upPanel\":\"books_upPanel__2e8ZB\",\"panel\":\"books_panel__3oqO5\",\"changeSlideCircle\":\"books_changeSlideCircle__1k6S2\",\"Cover\":\"books_Cover__18ka7\",\"activeCircle\":\"books_activeCircle__GqskM\"};","import React, { Component } from \"react\";\nimport { adresse } from \"../../config\";\nimport { Link } from \"react-router-dom\";\nimport classes from \"../../styles/books.module.scss\";\nimport axios from \"../../axiosInstance\";\nimport loading from \"../../styles/app.module.scss\";\nimport { getUser } from \"../../services/auth\";\nimport { connect } from \"react-redux\";\nimport { fetchCheckpoints } from \"../../actions/CheckpointReadingAction\";\n\nclass Sample extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: null,\n      book: {},\n      loading: true,\n      purchased: false,\n      chapterNr: 0,\n    };\n  }\n  async componentDidMount() {\n    await this.props.fetchCheckpoints();\n    let { id } = await this.props.match.params;\n    console.log(id);\n    this.setState({ id: id });\n    const book = await this.props.checkpoints.checkpoints.find(\n      (book) => book.bookId === this.state.id\n    );\n    console.log(book);\n    // const chapterNr = await book.checkpointCh;\n    if (book) {\n      this.setState({ chapterNr: book.checkpointCh });\n    } else {\n      this.setState({ chpaterNr: 0 });\n    }\n    console.log(this.state.chapterNr);\n    console.log(this.book);\n    const url = `${adresse}/books/gatePurchased/${this.state.id}`;\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + getUser().token,\n    };\n    const responseGate = await axios.get(url, {\n      headers: headers,\n    });\n    this.setState({ purchased: responseGate.data.flag });\n    const response = await axios.get(\n      `${adresse}/books/sample/${this.state.id}`\n    );\n\n    this.setState({ book: response.data }, () => {\n      this.setState({ loading: false });\n    });\n  }\n  render() {\n    if (this.state.loading) {\n      return (\n        <div\n          style={{\n            marginTop: \"-180px\",\n            width: \"100vw\",\n            height: \"100vh\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <div className={loading.loader}></div>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <div>\n          {this.state.book\n            ? this.state.book.sample\n            : \"Autor nie dodał jeszcze próbki swojej książki\"}\n        </div>\n\n        <Link\n          to={\n            this.state.purchased\n              ? `/${this.state.id}/reading/${this.state.chapterNr}`\n              : \"/\"\n          }\n        >\n          <button className={classes.btnChaptitle}>Czytaj dalej</button>\n        </Link>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  checkpoints: state.checkpointsReadingState,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchCheckpoints: () => dispatch(fetchCheckpoints()),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sample);\n"],"sourceRoot":""}