{"version":3,"sources":["styles/addBook.module.scss","components/AddBook/AddBookCover.js"],"names":["module","exports","AddBookCover","state","file","preview","id","sent","error","btnCt","redirect","addImg","event","preventDefault","url","adresse","headers","getUser","token","axios","post","then","res","setState","catch","console","log","goFurther","this","props","match","params","to","style","color","width","height","onSubmit","e","className","classes","inptsContainer","fileAdd","inpt","name","accept","type","onChange","handleImageChange","fileSbmt","value","buttonContainer","onClick","classesRoot","typicalBtn","frameContainer","src","empty","Component"],"mappings":"wFACAA,EAAOC,QAAU,CAAC,SAAW,0BAA0B,oBAAsB,qCAAqC,eAAiB,gCAAgC,QAAU,yBAAyB,eAAiB,gCAAgC,SAAW,0BAA0B,gBAAkB,iCAAiC,iBAAmB,kCAAkC,iBAAmB,kCAAkC,UAAY,2BAA2B,MAAQ,uBAAuB,QAAU,yBAAyB,kBAAoB,qC,wLCShjBC,E,4MACJC,MAAQ,CACNC,KAAM,OACNC,QAAS,KACTC,GAAI,GACJC,MAAM,EACNC,MAAO,GACPC,MAAO,GACPC,UAAU,G,EAUZC,OAAS,SAACC,GACRA,EAAMC,iBAEN,IAAMC,EAAG,UAAMC,IAAN,+BAAoC,EAAKZ,MAAMG,IAClDU,EAAU,CACd,eAAgB,OAChB,cAAiB,oBAAeC,cAAUC,QAG5CC,IAAMC,KAAKN,EAAK,CACdE,QAASA,IAERK,MAAK,SAAAC,GACJ,EAAKC,SAAS,CACZhB,MAAM,EACNC,MAAO,QAERgB,OAAM,SAAAhB,GACPiB,QAAQC,IAAIlB,GACZ,EAAKe,SAAS,CAAEhB,MAAM,EAAOC,MAAO,mI,EAQ1CmB,UAAY,YACc,IAApB,EAAKxB,MAAMI,KACb,EAAKgB,SAAS,CAAEb,UAAU,IAE1B,EAAKa,SAAS,CAAEf,MAAO,uC,kEAtCN,IACbF,EAAOsB,KAAKC,MAAMC,MAAMC,OAAxBzB,GACNsB,KAAKL,SAAS,CAAEjB,GAAIA,M,wCA4BJM,GAChBA,EAAMC,mB,+BAWE,IAAD,OACP,OAA4B,IAAxBe,KAAKzB,MAAMO,SACN,kBAAC,IAAD,CAAUsB,GAAE,mBAAcJ,KAAKzB,MAAMG,GAAzB,cAGnB,6BACE,yBAAK2B,MAAO,CAAEC,MAAO,MAAOC,MAAO,OAAQC,OAAQ,SAAWR,KAAKzB,MAAMK,OACzE,0BAAM6B,SAAU,SAACC,GAAD,OAAO,EAAK3B,OAAO2B,KACjC,yBAAKC,UAAWC,IAAQC,gBAEtB,2BACEF,UAAS,UAAKC,IAAQE,QAAb,YAAwBF,IAAQG,MACzCC,KAAK,iBACLC,OAAO,mCACPC,KAAK,OACLC,SAAU,SAACT,GAAD,OAAO,EAAKU,kBAAkBV,MAG1C,2BACEC,UAAS,UAAKC,IAAQG,KAAb,YAAqBH,IAAQS,UACtCH,KAAK,SACLI,MAAM,oBAIZ,yBAAKX,UAAWC,IAAQW,iBAAiB,4BAAQC,QAASxB,KAAKD,UAAWY,UAAWc,IAAYC,YAAxD,4CACzC,yBAAKf,UAAWC,IAAQe,gBAErB3B,KAAKzB,MAAME,QACV,yBAAKmD,IAAK5B,KAAKzB,MAAME,UACrB,yBAAKmD,IAAKC,Y,GAnFKC,aA4FZxD","file":"static/js/12.5cab4e73.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Category\":\"addBook_Category__dlvdX\",\"categoriesContainer\":\"addBook_categoriesContainer__2Gkjs\",\"frameContainer\":\"addBook_frameContainer__oVIwQ\",\"fileAdd\":\"addBook_fileAdd__a2Xcg\",\"inptsContainer\":\"addBook_inptsContainer__2wgYG\",\"fileSbmt\":\"addBook_fileSbmt__1c8NE\",\"buttonContainer\":\"addBook_buttonContainer__2ol1t\",\"writingContainer\":\"addBook_writingContainer__2eQ8r\",\"newChapContainer\":\"addBook_newChapContainer__2ShKR\",\"delAkapit\":\"addBook_delAkapit__2jk60\",\"oneUp\":\"addBook_oneUp__xAl5_\",\"oneDown\":\"addBook_oneDown__M38nc\",\"BackgroundForBook\":\"addBook_BackgroundForBook__13gGK\"};","import React, { Component } from 'react'\nimport { adresse } from '../../config';\nimport { getUser } from '../../services/auth';\nimport classes from '../../styles/addBook.module.scss'\nimport classesRoot from '../../styles/index.module.scss'\nimport axios from 'axios'\nimport empty from '../../assets/images/empty.png'\nimport { Redirect } from 'react-router-dom'\n\n\nclass AddBookCover extends Component {\n  state = {\n    file: 'file',\n    preview: null,\n    id: '',\n    sent: false,\n    error: '',\n    btnCt: '',\n    redirect: false,\n  }\n\n  componentDidMount() {\n    let { id } = this.props.match.params\n    this.setState({ id: id })\n  }\n\n\n\n  addImg = (event) => {\n    event.preventDefault()\n\n    const url = `${adresse}books/mine/addImage/${this.state.id}`\n    const headers = {\n      'content-type': 'file',\n      'Authorization': 'Bearer ' + `${getUser().token}`\n    }\n\n    axios.post(url, {\n      headers: headers\n    })\n      .then(res => { // then print response status\n        this.setState({\n          sent: true,\n          error: ''\n        })\n      }).catch(error => {\n        console.log(error);\n        this.setState({ sent: false, error: 'Coś poszło nie tak. Zdjęcie musi być w formacie png lub jpg i mieć nie więcej niż 1 Mb.' })\n      });\n  }\n\n  handleImageChange(event) {\n    event.preventDefault();\n\n  }\n  goFurther = () => {\n    if (this.state.sent === true) {\n      this.setState({ redirect: true })\n    } else {\n      this.setState({ error: 'Zdjęcie musi być dodane' })\n    }\n  }\n\n  render() {\n    if (this.state.redirect === true) {\n      return <Redirect to={`/myBooks/${this.state.id}/writing`} />\n    }\n    return (\n      <div>\n        <div style={{ color: 'red', width: '100%', height: '50px' }}>{this.state.error}</div>\n        <form onSubmit={(e) => this.addImg(e)}>\n          <div className={classes.inptsContainer}>\n\n            <input\n              className={`${classes.fileAdd} ${classes.inpt}`}\n              name=\"coverBookImage\"\n              accept=\"image/png, image/jpeg, image/jpg\"\n              type=\"file\"\n              onChange={(e) => this.handleImageChange(e)}\n            />\n\n            <input\n              className={`${classes.inpt} ${classes.fileSbmt}`}\n              type=\"submit\"\n              value=\"Prześlij\"\n            />\n          </div>\n        </form>\n        <div className={classes.buttonContainer}><button onClick={this.goFurther} className={classesRoot.typicalBtn}>Chcę przejść do pisania!</button></div>\n        <div className={classes.frameContainer}>\n\n          {this.state.preview ?\n            <img src={this.state.preview} /> :\n            <img src={empty} />\n          }\n\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default AddBookCover"],"sourceRoot":""}