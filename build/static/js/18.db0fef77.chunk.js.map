{"version":3,"sources":["styles/mybooks.module.scss","components/MyBooks/MyBooks.js"],"names":["module","exports","MyBooks","_isMounted","state","isLoading","books","urls","this","url","adresse","headers","getUser","token","fetch","then","response","json","setState","arrayBufferToBase64","buffer","binary","slice","call","Uint8Array","forEach","b","String","fromCharCode","window","btoa","style","marginTop","width","height","display","justifyContent","alignItems","className","loading","loader","to","classes","Container","map","book","index","key","id","Item","src","coverUrl","data","title","Component"],"mappings":"wFACAA,EAAOC,QAAU,CAAC,aAAe,8BAA8B,UAAY,2BAA2B,KAAO,wB,uJCMvGC,E,4MACFC,YAAa,E,EACbC,MAAM,CACFC,WAAW,EACXC,MAAO,GACPC,KAAM,I,kEAEe,IAAD,OAChBC,KAAKL,YAAa,EAClB,IAAMM,EAAG,UAAMC,IAAN,cACHC,EAAU,CAAE,eAAgB,mBAChB,cAAiB,oBAAeC,cAAUC,QAE5DC,MAAML,EAAK,CACPE,QAASA,IAEZI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UACxBF,MAAK,SAAAT,GACJ,EAAKY,SAAS,CAAEZ,MAAOA,IACL,WAEM,EAAKY,SAAS,CAACb,WAAW,Y,6CAO1DG,KAAKL,YAAa,I,+BAIlB,IAAMgB,EAAsB,SAACC,GACzB,IAAIC,EAAS,GAGb,MAFY,GAAGC,MAAMC,KAAK,IAAIC,WAAWJ,IACnCK,SAAQ,SAACC,GAAD,OAAOL,GAAUM,OAAOC,aAAaF,MAC5CG,OAAOC,KAAKT,IAGvB,OAA4B,IAAzBb,KAAKJ,MAAMC,UAA6B,yBAAK0B,MAAO,CAACC,UAAW,SAAUC,MAAO,QAASC,OAAQ,QAASC,QAAS,OAAQC,eAAgB,SAAUC,WAAY,WAAW,yBAAKC,UAAWC,IAAQC,UAEpM,6BACI,kBAAC,IAAD,CAAMC,GAAG,YAAW,+EACpB,yBAAKH,UAAWI,IAAQC,WAEvBnC,KAAKJ,MAAME,MAAMsC,KAAI,SAACC,EAAKC,GAAN,OAClB,kBAAC,IAAD,CAAMC,IAAKF,EAAKG,GAAIV,UAAWI,IAAQO,KAAMR,GAAE,mBAAcI,EAAKG,GAAnB,aAC/C,6BACI,yBAAKE,IAAOL,EAAKM,SAVd,0BAU6ChC,EAAoB0B,EAAKM,SAASC,MAAtD,OAC5B,2BAAIP,EAAKQ,kB,GAjDXC,aA2DPpD","file":"static/js/18.db0fef77.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnChaptitle\":\"mybooks_btnChaptitle__24k3x\",\"Container\":\"mybooks_Container__2wnQl\",\"Item\":\"mybooks_Item__1SDFv\"};","import React,{Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport {adresse} from '../../config'\nimport {getUser} from '../../services/auth'\nimport classes from '../../styles/mybooks.module.scss'\nimport loading from '../../styles/app.module.scss'\n\nclass MyBooks extends Component {\n    _isMounted = false;\n    state={\n        isLoading: true,\n        books: [],\n        urls: []\n    }\n        componentDidMount() {\n            this._isMounted = true;\n            const url = `${adresse}books/mine`\n            const headers = { 'Content-Type': 'application/json',\n                              'Authorization': 'Bearer ' + `${getUser().token}`\n            }\n            fetch(url, {\n                headers: headers\n              })\n            .then(response => response.json())\n              .then(books => {            \n                this.setState({ books: books\n                                },()=>{\n                                    \n                                        this.setState({isLoading: false})\n                                    \n                                })\n     \n            });\n    }\n    componentWillUnmount() {\n        this._isMounted = false;\n      }\n    render(){\n    \n        const arrayBufferToBase64 = (buffer) => {\n            var binary = '';\n            var bytes = [].slice.call(new Uint8Array(buffer));\n            bytes.forEach((b) => binary += String.fromCharCode(b));\n            return window.btoa(binary);\n        };\n        const base64Flag = 'data:image/jpeg;base64,';\n        if(this.state.isLoading === true) { return(<div style={{marginTop: '-180px', width: '100vw', height: '100vh', display: 'flex', justifyContent: 'center', alignItems: 'center'}}><div className={loading.loader}></div></div>)}\n          return (\n            <div>\n                <Link to=\"/addBook\"><h2>Dodaj własną książkę!</h2></Link>\n                <div className={classes.Container}>\n                \n                {this.state.books.map((book,index)=>(\n                    <Link key={book.id} className={classes.Item} to={`/myBooks/${book.id}/writing`}>\n                    <div>\n                        <img src={ !book.coverUrl ? null : base64Flag + arrayBufferToBase64(book.coverUrl.data)}/>\n                        <p>{book.title}</p>\n                    </div>\n                    </Link>\n                ))}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default MyBooks"],"sourceRoot":""}