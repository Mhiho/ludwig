{"version":3,"sources":["styles/mybooks.module.scss","components/MyBooks/MyBooks.js"],"names":["module","exports","MyBooks","_isMounted","state","isLoading","books","urls","this","url","adresse","headers","Authorization","getUser","token","fetch","then","response","json","setState","arrayBufferToBase64","buffer","binary","slice","call","Uint8Array","forEach","b","String","fromCharCode","window","btoa","style","marginTop","width","height","display","justifyContent","alignItems","className","loading","loader","to","classes","Container","map","book","index","key","id","Item","src","coverUrl","data","title","Component"],"mappings":"wFACAA,EAAOC,QAAU,CAAC,aAAe,8BAA8B,UAAY,2BAA2B,KAAO,wB,sJCMvGC,E,4MACJC,YAAa,E,EACbC,MAAQ,CACNC,WAAW,EACXC,MAAO,GACPC,KAAM,I,kEAEa,IAAD,OAClBC,KAAKL,YAAa,EAClB,IAAMM,EAAG,UAAMC,IAAN,eACHC,EAAU,CACd,eAAgB,mBAChBC,cAAe,UAAYC,cAAUC,OAEvCC,MAAMN,EAAK,CACTE,QAASA,IAERK,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACV,GACL,EAAKa,SAAS,CAAEb,MAAOA,IAAS,WAC9B,EAAKa,SAAS,CAAEd,WAAW,Y,6CAKjCG,KAAKL,YAAa,I,+BAGlB,IAAMiB,EAAsB,SAACC,GAC3B,IAAIC,EAAS,GAGb,MAFY,GAAGC,MAAMC,KAAK,IAAIC,WAAWJ,IACnCK,SAAQ,SAACC,GAAD,OAAQL,GAAUM,OAAOC,aAAaF,MAC7CG,OAAOC,KAAKT,IAGrB,OAA6B,IAAzBd,KAAKJ,MAAMC,UAEX,yBACE2B,MAAO,CACLC,UAAW,SACXC,MAAO,QACPC,OAAQ,QACRC,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAGd,yBAAKC,UAAWC,IAAQC,UAK5B,6BACE,kBAAC,IAAD,CAAMC,GAAG,YACP,+EAEF,yBAAKH,UAAWI,IAAQC,WACrBpC,KAAKJ,MAAME,MAAMuC,KAAI,SAACC,EAAMC,GAAP,OACpB,kBAAC,IAAD,CACEC,IAAKF,EAAKG,GACVV,UAAWI,IAAQO,KACnBR,GAAE,mBAAcI,EAAKG,GAAnB,aAEF,6BACE,yBACEE,IACGL,EAAKM,SAhCH,0BAkCchC,EAAoB0B,EAAKM,SAASC,MAD/C,OAIR,2BAAIP,EAAKQ,kB,GAvEHC,aAiFPrD","file":"static/js/18.7897524e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnChaptitle\":\"mybooks_btnChaptitle__24k3x\",\"Container\":\"mybooks_Container__2wnQl\",\"Item\":\"mybooks_Item__1SDFv\"};","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { adresse } from \"../../config\";\nimport { getUser } from \"../../services/auth\";\nimport classes from \"../../styles/mybooks.module.scss\";\nimport loading from \"../../styles/app.module.scss\";\n\nclass MyBooks extends Component {\n  _isMounted = false;\n  state = {\n    isLoading: true,\n    books: [],\n    urls: [],\n  };\n  componentDidMount() {\n    this._isMounted = true;\n    const url = `${adresse}/books/mine`;\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + getUser().token,\n    };\n    fetch(url, {\n      headers: headers,\n    })\n      .then((response) => response.json())\n      .then((books) => {\n        this.setState({ books: books }, () => {\n          this.setState({ isLoading: false });\n        });\n      });\n  }\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n  render() {\n    const arrayBufferToBase64 = (buffer) => {\n      var binary = \"\";\n      var bytes = [].slice.call(new Uint8Array(buffer));\n      bytes.forEach((b) => (binary += String.fromCharCode(b)));\n      return window.btoa(binary);\n    };\n    const base64Flag = \"data:image/jpeg;base64,\";\n    if (this.state.isLoading === true) {\n      return (\n        <div\n          style={{\n            marginTop: \"-180px\",\n            width: \"100vw\",\n            height: \"100vh\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <div className={loading.loader}></div>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <Link to=\"/addBook\">\n          <h2>Dodaj własną książkę!</h2>\n        </Link>\n        <div className={classes.Container}>\n          {this.state.books.map((book, index) => (\n            <Link\n              key={book.id}\n              className={classes.Item}\n              to={`/myBooks/${book.id}/writing`}\n            >\n              <div>\n                <img\n                  src={\n                    !book.coverUrl\n                      ? null\n                      : base64Flag + arrayBufferToBase64(book.coverUrl.data)\n                  }\n                />\n                <p>{book.title}</p>\n              </div>\n            </Link>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MyBooks;\n"],"sourceRoot":""}