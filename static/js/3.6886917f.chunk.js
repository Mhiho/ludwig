(this.webpackJsonpvanessa=this.webpackJsonpvanessa||[]).push([[3],{125:function(t,e,n){t.exports={Category:"addBook_Category__dlvdX",categoriesContainer:"addBook_categoriesContainer__2Gkjs",frameContainer:"addBook_frameContainer__oVIwQ",fileAdd:"addBook_fileAdd__a2Xcg",inptsContainer:"addBook_inptsContainer__2wgYG",fileSbmt:"addBook_fileSbmt__1c8NE",buttonContainer:"addBook_buttonContainer__2ol1t",writingContainer:"addBook_writingContainer__2eQ8r",newChapContainer:"addBook_newChapContainer__2ShKR",delAkapit:"addBook_delAkapit__2jk60",oneUp:"addBook_oneUp__xAl5_",oneDown:"addBook_oneDown__M38nc",BackgroundForBook:"addBook_BackgroundForBook__13gGK"}},126:function(t,e,n){t.exports={Container:"mypoems_Container__33Gd_",Poem:"mypoems_Poem__peHnm",Opacity:"mypoems_Opacity___BPts",opacity:"mypoems_opacity__329wk",Frame:"mypoems_Frame__1bQ5k",addAkaBtn:"mypoems_addAkaBtn__ZkuB-",addLine:"mypoems_addLine__3lCU6",goBackBtn:"mypoems_goBackBtn__1bXlS",deleteBtn:"mypoems_deleteBtn__Sgj7X",Akapit:"mypoems_Akapit__-AIiE",Line:"mypoems_Line__2aOFC",NewPoemBtn:"mypoems_NewPoemBtn__3_GoL",ContainerPoem:"mypoems_ContainerPoem__1iUfi",ContainerReading:"mypoems_ContainerReading__3EHwV",MyPoem:"mypoems_MyPoem__KLae-"}},127:function(t,e,n){"use strict";var a=n(40);var o=n(50);function i(t){return function(t){if(Array.isArray(t))return Object(a.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return i}))},129:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(130),o=Object.prototype.hasOwnProperty,i=Array.prototype.splice,r=Object.prototype.toString;function s(t){return r.call(t).slice(8,-1)}var c=Object.assign||function(t,e){return p(e).forEach((function(n){o.call(e,n)&&(t[n]=e[n])})),t},p="function"===typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function u(t){return Array.isArray(t)?c(t.constructor(t.length),t):"Map"===s(t)?new Map(t):"Set"===s(t)?new Set(t):t&&"object"===typeof t?c(Object.create(Object.getPrototypeOf(t)),t):t}var d=function(){function t(){this.commands=c({},l),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,e){return t===e},this.update.newContext=function(){return(new t).update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),t.prototype.extend=function(t,e){this.commands[t]=e},t.prototype.update=function(t,e){var n=this,i="function"===typeof e?{$apply:e}:e;Array.isArray(t)&&Array.isArray(i)||a(!Array.isArray(i),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),a("object"===typeof i&&null!==i,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var r=t;return p(i).forEach((function(e){if(o.call(n.commands,e)){var a=t===r;r=n.commands[e](i[e],r,i,t),a&&n.isEquals(r,t)&&(r=t)}else{var c="Map"===s(t)?n.update(t.get(e),i[e]):n.update(t[e],i[e]),p="Map"===s(r)?r.get(e):r[e];n.isEquals(c,p)&&("undefined"!==typeof c||o.call(t,e))||(r===t&&(r=u(t)),"Map"===s(r)?r.set(e,c):r[e]=c)}})),r},t}();e.Context=d;var l={$push:function(t,e,n){return m(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return m(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,n,o){return function(t,e){a(Array.isArray(t),"Expected $splice target to be an array; got %s",t),y(e.$splice)}(e,n),t.forEach((function(t){y(t),e===o&&t.length&&(e=u(o)),i.apply(e,t)})),e},$set:function(t,e,n){return function(t){a(1===Object.keys(t).length,"Cannot have more than one key in an object with $set")}(n),t},$toggle:function(t,e){h(t,"$toggle");var n=t.length?u(e):e;return t.forEach((function(t){n[t]=!e[t]})),n},$unset:function(t,e,n,a){return h(t,"$unset"),t.forEach((function(t){Object.hasOwnProperty.call(e,t)&&(e===a&&(e=u(a)),delete e[t])})),e},$add:function(t,e,n,a){return k(e,"$add"),h(t,"$add"),"Map"===s(e)?t.forEach((function(t){var n=t[0],o=t[1];e===a&&e.get(n)!==o&&(e=u(a)),e.set(n,o)})):t.forEach((function(t){e!==a||e.has(t)||(e=u(a)),e.add(t)})),e},$remove:function(t,e,n,a){return k(e,"$remove"),h(t,"$remove"),t.forEach((function(t){e===a&&e.has(t)&&(e=u(a)),e.delete(t)})),e},$merge:function(t,e,n,o){var i,r;return i=e,a((r=t)&&"object"===typeof r,"update(): $merge expects a spec of type 'object'; got %s",r),a(i&&"object"===typeof i,"update(): $merge expects a target of type 'object'; got %s",i),p(t).forEach((function(n){t[n]!==e[n]&&(e===o&&(e=u(o)),e[n]=t[n])})),e},$apply:function(t,e){var n;return a("function"===typeof(n=t),"update(): expected spec of $apply to be a function; got %s.",n),t(e)}},f=new d;function m(t,e,n){a(Array.isArray(t),"update(): expected target of %s to be an array; got %s.",n,t),h(e[n],n)}function h(t,e){a(Array.isArray(t),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",e,t)}function y(t){a(Array.isArray(t),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",t)}function k(t,e){var n=s(t);a("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",e,n)}e.isEquals=f.update.isEquals,e.extend=f.extend,e.default=f.update,e.default.default=t.exports=c(e.default,e)},130:function(t,e,n){"use strict";t.exports=function(t,e,n,a,o,i,r,s){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,a,o,i,r,s],u=0;(c=new Error(e.replace(/%s/g,(function(){return p[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},147:function(t,e,n){"use strict";n.r(e);var a=n(127),o=n(51),i=n(29),r=n(30),s=n(32),c=n(31),p=n(0),u=n.n(p),d=n(125),l=n.n(d),f=n(126),m=n.n(f),h=(n(49),n(24)),y=n(16),k=n(129),g=n.n(k),_=function(t){Object(s.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={title:"",author:"",year:"",cat:[],description:"",redirect:!1,id:"",poem:{akapits:[{lines:[]}]},line:"",isLoading:!0,akapitNr:0},t.deletePoem=function(e){var n={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(h.a)().token)};fetch("".concat(y.a,"poems/mine/deletePoem/").concat(e),{method:"DELETE",headers:n,body:JSON.stringify({id:e})}).then((function(t){return t})).then((function(e){return t.props.history.push("/")}))},t}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.id;this.setState({id:e},(function(){var e="".concat(y.a,"poems/mine/").concat(t.state.id),n={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(h.a)().token)};fetch(e,{headers:n}).then((function(t){return t.json()})).then((function(e){t.setState({title:e[0].title,poem:e[0].poem,isLoading:!1},(function(){t.setState({akapitNr:t.state.poem.akapits.length-1})}))}))}))}},{key:"deleteAkapit",value:function(t){var e=this,n="".concat(y.a,"users/updateMyPoem/").concat(this.state.id),a={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(h.a)().token)},o=this.state.poem.akapits.filter((function(e,n){return n!==t}));console.log(o),this.setState({akapitNr:this.state.akapitNr-1,poem:g()(this.state.poem,{akapits:{$set:o}})},(function(){console.log(e.state.poem),fetch(n,{method:"PATCH",headers:a,body:JSON.stringify({poem:e.state.poem})}).then((function(t){return t.ok||console.log("b\u0142\u0105d"),t.json()})).then((function(t){}))}))}},{key:"oneDown",value:function(t){var e=this;var n=function(t,e,n){if(n>=t.length)for(var a=n-t.length+1;a--;)t.push(void 0);return t.splice(n,0,t.splice(e,1)[0]),t}(this.state.poem.akapits,t,t+1),a="".concat(y.a,"users/updateMyPoem/").concat(this.state.id),o={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(h.a)().token)};this.setState({poem:g()(this.state.poem,{akapits:{$set:n}})},(function(){fetch(a,{method:"PATCH",headers:o,body:JSON.stringify({poem:e.state.poem})}).then((function(t){return t.ok||console.log("b\u0142\u0105d"),t.json()})).then((function(t){}))}))}},{key:"oneUp",value:function(t){var e=this;var n=function(t,e,n){if(n>=t.length)for(var a=n-t.length+1;a--;)t.push(void 0);return t.splice(n,0,t.splice(e,1)[0]),t}(this.state.poem.akapits,t,t-1),a="".concat(y.a,"users/updateMyBook/").concat(this.state.id),o={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(h.a)().token)};this.setState({poem:g()(this.state.poem,{akapits:{$set:n}})},(function(){fetch(a,{method:"PATCH",headers:o,body:JSON.stringify({poem:e.state.poem})}).then((function(t){return t.ok||console.log("b\u0142\u0105d"),t.json()})).then((function(t){}))}))}},{key:"editPoem",value:function(t){var e=this;t.preventDefault();var n="".concat(y.a,"users/updateMyPoem/").concat(this.state.id),a={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(h.a)().token)};this.setState({poem:g()(this.state.poem,{akapits:Object(o.a)({},this.state.poem.akapits.length-1,{lines:Object(o.a)({},this.state.poem.akapits[this.state.poem.akapits.length-1].lines.length,{$set:this.state.line})})})},(function(){fetch(n,{method:"PATCH",headers:a,body:JSON.stringify({poem:e.state.poem})}).then((function(e){return e.ok||(t.preventDefault(),console.log("b\u0142\u0105d")),e.json()})).then((function(t){})),e.setState({line:""})}))}},{key:"addAka",value:function(){var t=this,e="".concat(y.a,"users/updateMyPoem/").concat(this.state.id),n={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(h.a)().token)},o=[].concat(Object(a.a)(this.state.poem.akapits),[{lines:[]}]);console.log("!"+o),this.setState({poem:{akapits:o}},(function(){fetch(e,{method:"PATCH",headers:n,body:JSON.stringify({poem:t.state.poem,akapitNr:t.state.akapitNr+1})}).then((function(t){return t.ok||console.log("b\u0142\u0105d"),t.json()})).then((function(t){}))}))}},{key:"render",value:function(){var t=this;return console.log(this.state.poem),u.a.createElement("div",{className:m.a.Frame},u.a.createElement("h2",null,this.state.title),u.a.createElement("span",null,"Dodaj akapit "),u.a.createElement("button",{className:m.a.addAkaBtn,onClick:function(){return t.addAka()}},"+"),u.a.createElement("form",{onSubmit:function(e){return t.editPoem(e)}},u.a.createElement("input",{name:"line",type:"text",onChange:function(e){return t.setState({line:e.target.value})},value:this.state.line}),u.a.createElement("input",{className:m.a.addLine,type:"submit",value:"dodaj wers"})),u.a.createElement("div",{className:l.a.Part},this.state.poem.akapits.map((function(e,n){return u.a.createElement("div",{key:n,className:m.a.Akapit},"  ",e.lines.map((function(t,e){return u.a.createElement("p",{className:m.a.Line,key:e+100},t," ")})),"  ",u.a.createElement("span",{className:l.a.oneUp,onClick:0===t.state.poem.akapits?null:function(){return t.oneUp(n)}},"\u2191"),u.a.createElement("span",{className:l.a.oneDown,onClick:t.state.poem.akapits.length-1===n?null:function(){return t.oneDown(n)}},"\u2193"),u.a.createElement("span",{className:l.a.delAkapit,onClick:1===t.state.poem.akapits.length?null:function(){return t.deleteAkapit(n)}},"\xd7 "))}))),u.a.createElement("button",{className:m.a.goBackBtn,onClick:function(){return t.props.history.goBack()}},"Wr\xf3\u0107 do poprzedniej strony"),u.a.createElement("button",{className:m.a.deleteBtn,onClick:function(){return t.deletePoem(t.state.id)}},"Usu\u0144 ten bullshit"))}}]),n}(p.Component);e.default=_}}]);
//# sourceMappingURL=3.6886917f.chunk.js.map