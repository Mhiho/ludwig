(this.webpackJsonpvanessa=this.webpackJsonpvanessa||[]).push([[11],{100:function(t,e,n){t.exports={Container:"mypoems_Container__33Gd_",Poem:"mypoems_Poem__peHnm",Opacity:"mypoems_Opacity___BPts",opacity:"mypoems_opacity__329wk",Frame:"mypoems_Frame__1bQ5k",addAkaBtn:"mypoems_addAkaBtn__ZkuB-",addLine:"mypoems_addLine__3lCU6",goBackBtn:"mypoems_goBackBtn__1bXlS",deleteBtn:"mypoems_deleteBtn__Sgj7X",Akapit:"mypoems_Akapit__-AIiE",Line:"mypoems_Line__2aOFC",NewPoemBtn:"mypoems_NewPoemBtn__3_GoL",ContainerPoem:"mypoems_ContainerPoem__1iUfi",ContainerReading:"mypoems_ContainerReading__3EHwV",MyPoem:"mypoems_MyPoem__KLae-"}},126:function(t,e,n){"use strict";n.r(e);var a=n(98),o=n(21),m=n(22),i=n(24),c=n(23),r=n(25),s=n(0),l=n.n(s),u=n(10),d=n(16),h=n(100),p=n.n(h),y=n(26),_=n.n(y),f=(l.a.Component,function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,m=new Array(a),r=0;r<a;r++)m[r]=arguments[r];return(n=Object(i.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(m)))).state={isLoading:!0,id:null,data:null,comments:!1,commentsData:[],myCom:"",counter:0},n}return Object(r.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.id;this.setState({id:e},(function(){var e="".concat(d.a,"poems/poem/").concat(t.state.id),n={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(u.a)().token)};fetch(e,{headers:n}).then((function(t){return t.json()})).then((function(e){t.setState({data:e},(function(){var e="".concat(d.a,"comments/showComments/").concat(t.state.id),n={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(u.a)().token)};fetch(e,{headers:n}).then((function(t){return t.json()})).then((function(e){t.setState({commentsData:e},(function(){t.setState({isLoading:!1,counter:t.state.commentsData.length})}))}))}))}))}))}},{key:"showCommentsHandler",value:function(){this.setState({comments:!this.state.comments})}},{key:"addComment",value:function(){var t=this;this.setState({counter:this.state.counter+1},(function(){var e="".concat(d.a,"comments/add/").concat(t.state.id),n={"Content-Type":"application/json",Authorization:"Bearer "+"".concat(Object(u.a)().token)},o=new Date,m=o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+" @ "+o.getHours()+":"+o.getMinutes();console.log(m);var i={commentAuthor:Object(u.a)().user.name,comment:t.state.myCom,commentedAt:m},c=[].concat(Object(a.a)(t.state.commentsData),[i]);t.setState({commentsData:c}),fetch(e,{method:"POST",headers:n,body:JSON.stringify(i)}).then((function(t){return t.ok||console.log("b\u0142\u0105d"),t.json()})).then((function(t){}))}))}},{key:"render",value:function(){var t=this;return console.log(this.state.commentsData),!0===this.state.isLoading?l.a.createElement("div",{style:{marginTop:"-180px",width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},l.a.createElement("div",{className:_.a.loader})):l.a.createElement("div",{className:p.a.ContainerReading},l.a.createElement("h2",null,this.state.data.author),l.a.createElement("h3",null,this.state.data.title),l.a.createElement("h4",null,this.state.data.genre),l.a.createElement("div",null,this.state.data.categories.map((function(t,e){return l.a.createElement("h5",{key:e},t)}))),this.state.data.poem.akapits.map((function(t,e){return l.a.createElement("div",{className:p.a.Akapit,key:e},t.lines.map((function(t,e){return l.a.createElement("p",{className:p.a.Line,key:e},t)})))})),l.a.createElement("h5",null,this.state.data.year),l.a.createElement("p",null,this.state.data.description),l.a.createElement("div",{style:{marginTop:"30px"}},l.a.createElement("button",{onClick:function(){return t.showCommentsHandler()}},"Wy\u015bwietl komentarze")),l.a.createElement("div",null,!1===this.state.comments?null:l.a.createElement("div",null,l.a.createElement("div",null,this.state.commentsData.map((function(t){return l.a.createElement("div",null,l.a.createElement("h3",null,t.commentAuthor),l.a.createElement("h4",null,t.comment),l.a.createElement("h5",null,t.commentedAt))})))),l.a.createElement("div",null,l.a.createElement("input",{type:"text",onChange:function(e){return t.setState({myCom:e.target.value})},value:this.state.myCom,name:"comment"}),l.a.createElement("button",{onClick:function(){return t.addComment()}},"dodaj komentarz"))))}}]),e}(s.Component));e.default=f},98:function(t,e,n){"use strict";function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return a}))}}]);
//# sourceMappingURL=11.1c54e64d.chunk.js.map