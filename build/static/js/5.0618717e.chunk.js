/*! For license information please see 5.0618717e.chunk.js.LICENSE.txt */
(this.webpackJsonpvanessa=this.webpackJsonpvanessa||[]).push([[5],{127:function(e,t,n){e.exports={Container:"mypoems_Container__33Gd_",Poem:"mypoems_Poem__peHnm",Opacity:"mypoems_Opacity___BPts",opacity:"mypoems_opacity__329wk",Frame:"mypoems_Frame__1bQ5k",addAkaBtn:"mypoems_addAkaBtn__ZkuB-",addLine:"mypoems_addLine__3lCU6",goBackBtn:"mypoems_goBackBtn__1bXlS",deleteBtn:"mypoems_deleteBtn__Sgj7X",Akapit:"mypoems_Akapit__-AIiE",Line:"mypoems_Line__2aOFC",NewPoemBtn:"mypoems_NewPoemBtn__3_GoL",ContainerPoem:"mypoems_ContainerPoem__1iUfi",ContainerReading:"mypoems_ContainerReading__3EHwV",MyPoem:"mypoems_MyPoem__KLae-",progressBar:"mypoems_progressBar__3ULVK"}},135:function(e,t,n){"use strict";var a;(function(){var n=null,r=0,i=!1,o="undefined"!==typeof window;var s=function(){if(o&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("TEST_PASSIVE_EVENT_SUPPORT",n,t),window.removeEventListener("TEST_PASSIVE_EVENT_SUPPORT",n,t),e}return!1}(),c=o&&"function"===typeof window.CustomEvent;function l(){return"undefined"===typeof window?null:(r++,n||(n=this,this.handleScroll=this.handleScroll.bind(this),this.eventListenerOptions=!s||{passive:!0},void window.addEventListener("scroll",this.handleScroll,this.eventListenerOptions)))}l.prototype.removeListener=function(){0===--r&&this.destroy()},l.prototype.destroy=function(){window.removeEventListener("scroll",this.handleScroll,this.eventListenerOptions),n=null,r=0},l.prototype.getScrollPosition=function(){var e=window.scrollY||document.documentElement.scrollTop,t=window.scrollX||document.documentElement.scrollLeft;return e<0&&(e=0),t<0&&(t=0),{scrollPosition:e,scrollPositionY:e,scrollPositionX:t}},l.prototype.handleScroll=function(){var e;i||(i=!0,c?e=new CustomEvent("window-scroll",{detail:this.getScrollPosition()}):(e=document.createEvent("CustomEvent")).initCustomEvent("window-scroll",!1,!1,this.getScrollPosition()),window.dispatchEvent(e),window.requestAnimationFrame((function(){i=!1})))},e.exports?(l.default=l,e.exports=l):void 0===(a=function(){return l}.apply(t,[]))||(e.exports=a)}).call(this)},136:function(e,t,n){var a;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a)&&a.length){var o=r.apply(null,a);o&&e.push(o)}else if("object"===i)for(var s in a)n.call(a,s)&&a[s]&&e.push(s)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()},137:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=void 0===t?{}:t,a=n.propTypes,i=n.defaultProps,o=n.allowFallback,s=void 0!==o&&o,c=n.displayName,l=void 0===c?e.name||e.displayName:c,u=function(t,n){return e(t,n)};return Object.assign(r.default.forwardRef||!s?r.default.forwardRef(u):function(e){return u(e,null)},{displayName:l,propTypes:a,defaultProps:i})};var a,r=(a=n(0))&&a.__esModule?a:{default:a}},156:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n.n(a),i=n(22),o=n(30),s=n(31),c=n(33),l=n(32),u=n(0),p=n.n(u),d=n(52),m=n(127),f=n.n(m),h=n(49),v=n.n(h),y=n(63),_=n(53),w=n(2),b=n(8),g=n(136),P=n.n(g),E=(n(137),p.a.createContext({}));E.Consumer,E.Provider;function k(e,t){var n=Object(u.useContext)(E);return e||n[t]||t}function O(e,t,n){var a=(e-t)/(n-t)*100;return Math.round(1e3*a)/1e3}function C(e,t){var n,a=e.min,r=e.now,i=e.max,o=e.label,s=e.srOnly,c=e.striped,l=e.animated,u=e.className,d=e.style,m=e.variant,f=e.bsPrefix,h=Object(b.a)(e,["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"]);return p.a.createElement("div",Object(w.a)({ref:t},h,{role:"progressbar",className:P()(u,f+"-bar",(n={},n["bg-"+m]=m,n[f+"-bar-animated"]=l,n[f+"-bar-striped"]=l||c,n)),style:Object(w.a)({width:O(r,a,i)+"%"},d),"aria-valuenow":r,"aria-valuemin":a,"aria-valuemax":i}),s?p.a.createElement("span",{className:"sr-only"},o):o)}var x=p.a.forwardRef((function(e,t){var n=e.isChild,a=Object(b.a)(e,["isChild"]);if(a.bsPrefix=k(a.bsPrefix,"progress"),n)return C(a,t);var r=a.min,i=a.now,o=a.max,s=a.label,c=a.srOnly,l=a.striped,d=a.animated,m=a.bsPrefix,f=a.variant,h=a.className,v=a.children,y=Object(b.a)(a,["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"]);return p.a.createElement("div",Object(w.a)({ref:t},y,{className:P()(h,m)}),v?function(e,t){var n=0;return p.a.Children.map(e,(function(e){return p.a.isValidElement(e)?t(e,n++):e}))}(v,(function(e){return Object(u.cloneElement)(e,{isChild:!0})})):C({min:r,now:i,max:o,label:s,srOnly:c,striped:l,animated:d,bsPrefix:m,variant:f},t))}));x.displayName="ProgressBar",x.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1};var S=x,N=n(135),j=n.n(N),B=n(26),L=n(16),R=n(17),T=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setPosition=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(L.a,"/users/updateReadingBook/").concat(a.state.id),e.next=3,Object(B.a)({method:"put",url:t,headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(R.a)().token},data:JSON.stringify({bookId:a.state.id,checkpointCh:a.state.chapterNr,checkpointA:Math.round(a.state.currentPosition)})});case 3:case"end":return e.stop()}}),e)}))),a.myRef=p.a.createRef(),a.state={id:null,checkpoints:[],chapterNr:null,loading:!0,position:0,limit:.1,currentPosition:null,currentChapter:null,bodyHeight:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t,n,a,i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.match.params;case 2:return t=e.sent,n=t.id,this.setState({id:n}),e.next=7,this.props.fetchCheckpoints();case 7:return e.next=9,this.props.checkpoints.checkpoints.find((function(e){return e.bookId===n}));case 9:a=e.sent,this.setState({loading:!1},(function(){i.setState({chapterNr:a.checkpointCh,currentPosition:a.checkpointA},(function(){i.props.fetchReading(i.state.id)}))})),setInterval(this.setPosition,1e4),document.getElementsByTagName("body")[0].addEventListener("load",(function(){i.setState({limit:i.myRef.current.offsetTop})})),new j.a,window.addEventListener("window-scroll",(function(e){var t=e.detail.scrollPosition;i.setState({limit:i.myRef.current.offsetTop}),i.setState({currentPosition:t/i.state.limit*100})}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeChapter",value:function(e){this.setState({chapterNr:e})}},{key:"render",value:function(){var e=this,t=this.props.book;return 0===t.reading.length?p.a.createElement("div",{style:{marginTop:"-180px",width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},p.a.createElement("div",{className:v.a.loader})):p.a.createElement("div",null,p.a.createElement(S,{className:"".concat(f.a.progressBar),now:this.state.currentPosition,variant:"warning"}),p.a.createElement("div",null,t.reading.chapters.length>0?t.reading.chapters.map((function(t,n){return p.a.createElement("button",{onClick:function(){return e.changeChapter(n)},className:f.a.btnChaptitle},t?t.chapTitle:"")})):null),t.reading.chapters.length>0?t.reading.chapters[this.state.chapterNr].chapTitle:null,t.reading.chapters.length>0?t.reading.chapters[this.state.chapterNr].akapits.map((function(e,t){return p.a.createElement("p",null,e)})):null,p.a.createElement("div",{className:"Ref",ref:this.myRef},"."))}}]),n}(u.Component);t.default=Object(d.b)((function(e){return{book:e.booksReadingState,checkpoints:e.checkpointsReadingState}}),(function(e){return{fetchReading:function(t){return e(Object(y.b)(t))},fetchCheckpoints:function(){return e(Object(_.b)())}}}))(T)}}]);
//# sourceMappingURL=5.0618717e.chunk.js.map